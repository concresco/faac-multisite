function sendAnalyticsOFTB(e,t){"1"===OutoftheBox_vars.google_analytics&&("undefined"!=typeof ga&&null!==ga&&ga("send","event","Out-of-the-Box",e,t),"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","Out-of-the-Box",e,t]),"undefined"!=typeof gtag&&null!==gtag&&gtag("event",e,{event_category:"Out-of-the-Box",event_label:t,value:t}))}jQuery(document).ready(function(e){"use strict";e.widget("cp.OutoftheBox",{options:{listtoken:null,searchQuery:null},_create:function(){let t=this;if(this.element.removeClass("jsdisabled"),this.element.show(),this.element.on("contextmenu",function(t){if(!1===e(t.target).hasClass("description-text"))return!1}),this.options.main=this,this.options.topContainer=this.element.parent(),this.options.loadingContainer=this.element.find(".loading"),this.options.treeContainer=this.element.find(".wpcp-browser-container-tree"),this.options.infoContainer=this.element.find(".wpcp-browser-container-info"),this.element.css("width","100%"),this.options.listtoken=this.element.attr("data-token"),this.options.account_id=this.element.attr("data-account-id"),this.options.instance_action=this.element.attr("data-action"),this.raw_path,this.searchQuery=this.element.attr("data-query"),this.cache={},this.requires_password=this.element.find(".wpcp-login-container").length>0,this.requires_lead=this.element.find(".wpcp-lead-container").length>0,this.xhrPool=[],this.xhrPool.abortAll=function(){e(this).each(function(e,t){t.abort()}),t.xhrPool.length=0},this.options.userAgent=navigator.userAgent||navigator.vendor||window.opera,this.options.supportTouch=!!("ontouchstart"in window)&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(this.options.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this.options.mobile=!1,/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var n=navigator.userAgent.toLowerCase();n.search("android")>-1&&n.search("mobile")>-1?this.options.mobile=!0:n.search("android")>-1&&!(n.search("mobile")>-1)?this.options.mobile=!1:this.options.mobile=!0}else"1"===this.options.is_mobile&&(this.options.mobile=!0);if(this.options.mobile&&e("body").addClass("wpcp-mobile"),e("body").addClass("wpcp-theme-"+this.options.content_skin),this.options.topContainer.hasClass("wpcp-theme-light")?this.options.content_skin="light":this.options.topContainer.hasClass("wpcp-theme-dark")&&(this.options.content_skin="dark"),this.is_rtl="rtl"===window.getComputedStyle(document.body,null).getPropertyValue("direction"),this.breakpoints={xxxs:320,xxs:480,xs:576,sm:768,md:992,lg:1024,xl:1200,xxl:1600},-1==document.cookie.indexOf("WPCP_UUID=")){var o=new Date;o.setTime(o.getTime()+6048e5);var i="; expires="+o.toUTCString(),a=t.options.uuid;document.cookie="WPCP_UUID="+a+i+"; path="+t.options.cookie_path+"; domain="+t.options.cookie_domain+"; SameSite=Strict;"}t._initCache(),""!==this.options.recaptcha?this._checkReCaptcha(this):t._askLogin()},_destroy:function(){return this._super()},_setOption:function(e,t){this._super(e,t)},_askLogin:function(){let e=this;e.requires_password?e._checkLogin():e._askLead()},_askLead:function(){let e=this;e.requires_lead?e._checkLead():e._initiate()},_initiate:function(){let t=this;t._initLazyLoad(),t.options.topContainer.one("inview",function(e,n){t._orgininal_width=t.element.width(),t._initResizeHandler(),(t.options.topContainer.hasClass("files")||t.options.topContainer.hasClass("gallery")||t.options.topContainer.hasClass("search")||t.options.topContainer.hasClass("proofing"))&&(t._initFilebrowser(),t.options.topContainer.hasClass("gallery")&&t.renderContentForGallery()),(t.options.topContainer.hasClass("video")||t.options.topContainer.hasClass("audio"))&&t._initMediaPlayer(),t.element.find(".fileupload-box").length>0&&t._initUploadBox(),t.options.topContainer.hasClass("carousel")&&t._initCarousel(),t.options.topContainer.hasClass("proofing")&&t._initProofing(),t.options.topContainer.hasClass("proofing")&&t._initProofing(),t._addBreakpointClass()});let n=t.options.topContainer.parents("*").filter(function(){return"none"==e(this).css("display")}).length;t.element.find(".fileupload-box").length>0&&t.element.closest("form").length>0&&!1===n&&t.options.topContainer.hasClass("initiate");var o=new URL(window.location),i=new URLSearchParams(o.search),a=i.get("wpcp_link");if(null!==a){var l=JSON.parse(decodeURIComponent(atob(a)));l.source===this.element.attr("data-source")&&t.options.topContainer.addClass("initiate")}t.options.topContainer.hasClass("initiate")&&t.options.topContainer.trigger("inview"),window.setTimeout(function(){t.initated=!0},2e3),t.element.trigger("outofthebox-loaded",t),e(window).on("beforeunload",function(){t.xhrPool.abortAll()})},_storeCurrentPosition:function(){let e=this;var t={source:e.element.attr("data-source"),account_id:e.element.attr("data-account-id"),last_path:e.element.attr("data-path"),layout:e.element.attr("data-layout")},n=new Date;n.setMinutes(n.getMinutes()+15),t.expires=n.getTime(),e._cacheSet("wpcp-"+e.options.listtoken+"-"+e.options.refresh_nonce+"-current",t)},_setCurrentPosition:function(){let t=this;if("shortcode_builder"!==t.element.attr("data-action")&&"1"===t.options.remember_last_location){var n=t._cacheGet("wpcp-"+t.options.listtoken+"-"+t.options.refresh_nonce+"-current");if(null!==n&&n.source===t.element.attr("data-source")){t.options.account_id=n.account_id,t.element.attr("data-account-id",n.account_id),t.element.attr("data-path",n.last_path),t.element.attr("data-layout",n.layout),e(".nav-account-selector").removeClass("account-active");let o=e('.nav-account-selector[data-account-id="'+n.account_id+'"]');o.addClass("account-active"),t.element.find(".nav-account-selector:first").html(o.html())}}},_initFilebrowser:function(){let e=this;e._initNavMenu(),e._initBrowserViewActions(),e._initEntryMenuActions(),e._initScrollToTop(),e._initImageFolderThumbActions(),e._initLinkEvent();var t={};e._setCurrentPosition();var n=new URL(window.location),o=new URLSearchParams(n.search),i=o.get("wpcp_link");if(null!==i){var a=JSON.parse(decodeURIComponent(atob(i)));a.source===e.element.attr("data-source")&&(e.options.account_id=a.account_id,e.element.attr("data-account-id",a.account_id),e.element.attr("data-path",a.last_path),e.options.focus_id=a.focus_id,setTimeout(function(){e.element[0].scrollIntoView({behavior:"auto",block:"center",inline:"center"})},100))}("1"===e.element.attr("data-lightboxopen")&&void 0===e.options.focus_id||null===e.options.focus_id)&&e.element.one("wpcp-content-loaded",function(e,t){t.element.find("a.ilightbox-group").first().trigger("click")}),!1!==e.options.topContainer.hasClass("search")&&null===e.searchQuery||e._getFileList(t)},_initMediaPlayer:function(){let e=this;window.init_out_of_the_box_media_player(e.options.listtoken,e)},_initUploadBox:function(){let e=this;e.element.find(".fileupload-box").OutoftheBoxUploadbox(e.options)},_initCarousel:function(){let e=this;e.element.WPCP_OutoftheBox_Carousel(e.options)},_initProofing:function(){let e=this;e.element.WPCP_OutoftheBox_Proofing(e.options)},_checkLogin:function(){let t=this,n=t.element.find(".wpcp-login-submit"),o=n.prev(".wpcp-login-input"),i=n.parents(".wpcp-login-container"),a="wpcp-"+t.options.listtoken+"-pass";if(i.length>0&&i.attr("data-pass").length>0&&-1==document.cookie.indexOf(a+"=")){let e=new Date;e.setTime(e.getTime()+6048e5);let n="; expires="+e.toUTCString();document.cookie=a+"="+i.attr("data-pass")+n+"; path="+t.options.cookie_path+"; domain="+t.options.cookie_domain+"; SameSite=Strict;"}e(n).on("click",function(){i.removeClass("wpcp-login-unlocked"),n.prop("disabled",!0).addClass("disabled"),e.ajax({type:"POST",url:t.options.ajax_url,data:{action:"outofthebox-module-login",listtoken:t.options.listtoken,module_password:n.prev(".wpcp-login-input").val(),_ajax_nonce:t.options.login_nonce},success:function(e){!0===e.success?(t._askLead(),i.fadeOut("slow",function(){i.addClass("wpcp-login-unlocked")})):o.val("")},error:function(e){o.val("")},complete:function(){n.prop("disabled",!1).removeClass("disabled")},dataType:"json"})}),i.hasClass("wpcp-login-unlocked")&&(t._askLead(),i.fadeOut("slow"))},_checkLead:function(){let t=this,n=t.element.find(".wpcp-lead-submit"),o=n.prev(".wpcp-lead-input"),i=n.parents(".wpcp-lead-container"),a="wpcp-user-lead";if(i.length>0&&-1==document.cookie.indexOf(a+"=")){let e=new Date;e.setTime(e.getTime()+6048e5);let n="; expires="+e.toUTCString();document.cookie=a+"="+i.attr("wpcp-user-lead")+n+"; path="+t.options.cookie_path+"; domain="+t.options.cookie_domain+"; SameSite=Strict;"}e(n).on("click",function(){i.removeClass("wpcp-lead-unlocked"),n.prop("disabled",!0).addClass("disabled"),e.ajax({type:"POST",url:t.options.ajax_url,data:{action:"outofthebox-module-lead",listtoken:t.options.listtoken,email:n.prev("input").val(),_ajax_nonce:t.options.lead_nonce},success:function(e){!0===e.success?(t._initiate(),i.fadeOut("slow",function(){i.addClass("wpcp-lead-unlocked")})):o.val("")},error:function(e){o.val("")},complete:function(){n.prop("disabled",!1).removeClass("disabled")},dataType:"json"})}),i.hasClass("wpcp-lead-unlocked")&&(t._initiate(),i.fadeOut("slow"))},_getFileList:function(e){let t=this;var n=t._buildFileListRequest();t.element.removeClass("wpcp-no-results"),t.options.loadingContainer.removeClass("initialize upload error").fadeIn(400),t.element.find(".nav-refresh i").addClass("eva-spin eva-spin-center"),n(e,t)},_buildFileListRequest:function(e){let t=this;var n=e=>{t.renderBrowserContent(e),!1!==e&&t._storeCurrentPosition()};return t._pipeline({url:t.options.ajax_url,type:"POST",dataType:"json",data:function(e){return e.listtoken=t.options.listtoken,e.account_id=t.options.account_id,e.lastpath=t.element.attr("data-path"),e.sort=t.element.attr("data-sort"),e.action="outofthebox-get-filelist",e._ajax_nonce=t.options.refresh_nonce,e.mobile=t.options.mobile,"gallery"===t.element.attr("data-list")&&(e.action="outofthebox-get-gallery",e.type="gallery",e._ajax_nonce=t.options.gallery_nonce),e.query=t.searchQuery,e}},n)},_initSearchBox:function(){let t=this;var n=t.element[0].querySelector(".nav-search"),o=t.element[0].querySelector(".search-wrapper");null!=o&&(null!=n?(e(n).on("click",function(e){e.stopPropagation()}),o.classList.remove("tippy-content-holder"),tippy(n,{trigger:"click",arrow:!1,offset:[0,10],content:o,allowHTML:!0,placement:t.is_rtl?"bottom-start":"bottom-end",appendTo:t.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,interactiveDebounce:500,onShown:function(t){e("input",t.popper).focus()},onCreate:function(n){t._initSearchBoxActions(e(n.popper))}})):t._initSearchBoxActions(t.element))},_initSearchBoxActions:function(e){let t=this;e.find(".search-input").on("keyup",function(n){let o=n.which?n.which:n.keyCode;13==o&&t.doSearch(e.find(".search-input"),n)}),e.find(".search-submit, .search-icon").on("click",function(n){t.doSearch(e.find(".search-input"),n)}),e.find(".search-remove").on("click",function(e){t.clearSearchBox()}),e.find(".search-input").val(t.searchQuery)},doSearch:function(e,t){let n=this;0!==e.length&&(n.searchQuery=e.val().replace(/(<([^>]+)>)/gi,""),e.val().length>0?(n.options.loadingContainer.addClass("search"),n.element.find(".nav-search").addClass("inuse"),clearTimeout(n.updateTimer),n.updateTimer=setTimeout(function(){n.element.find(".loading, .ajax-filelist").show(),n._getFileList({})},100)):(n.element.find(".nav-search").removeClass("inuse"),n.element.hasClass("searchlist")?(n.element.find(".loading, .ajax-filelist").hide(),n.element.find(".ajax-filelist").html("")):n._getFileList({})))},clearSearchBox:function(e){let t=this;t.searchQuery="",t.element.find(".search-input").val(""),void 0===e&&t.doSearch(t.element.find(".search-input"))},_initNavActionMenu:function(){let t=this;var n=t.element[0].querySelector(".nav-gear"),o=t.element[0].querySelector(".gear-div");null!=o&&null!=n&&(e(o).find("ul > li").length<2?e(n).remove():(e(n).on("click",function(e){e.stopPropagation()}),o.classList.remove("tippy-content-holder"),tippy(n,{trigger:"click",arrow:!1,offset:0,content:o,maxWidth:350,allowHTML:!0,placement:t.is_rtl?"bottom-start":"bottom-end",appendTo:t.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,onShow:function(e){t._initNavActionMenuEvents(e)}})))},_initNavActionMenuEvents:function(t){let n=this;var o=e("<div>").attr("data-id",n.element.attr("data-id"));switch(e(t.popper).find(".nav-layout").off("click").on("click",function(e){t.hide(),n.element.find(".ajax-filelist").html(""),"list"===n.element.attr("data-layout")?n.element.attr("data-layout","grid"):n.element.attr("data-layout","list"),n._storeCurrentPosition(),n._getFileList({})}),n.element.attr("data-layout")){case"list":e(t.popper).find(".nav-layout-grid").closest("li").show(),e(t.popper).find(".nav-layout-list").closest("li").hide();break;case"grid":e(t.popper).find(".nav-layout-grid").closest("li").hide(),e(t.popper).find(".nav-layout-list").closest("li").show()}var i=n._helperReadArrCheckBoxes("[data-token='"+n.options.listtoken+"'] input[name='selected-files[]']");0===i.length?(e(t.popper).find(".selected-files-to-zip").parent().hide(),e(t.popper).find(".all-files-to-zip").parent().show(),e(t.popper).find(".selected-files-delete").parent().hide(),e(t.popper).find(".selected-files-move").parent().hide(),e(t.popper).find(".selected-files-copy").parent().hide(),e(t.popper).find(".selected-files-import").parent().hide()):(e(t.popper).find(".selected-files-to-zip").parent().show(),e(t.popper).find(".all-files-to-zip").parent().hide(),e(t.popper).find(".selected-files-delete").parent().show(),e(t.popper).find(".selected-files-move").parent().show(),e(t.popper).find(".selected-files-copy").parent().show(),e(t.popper).find(".selected-files-import").parent().show());var a=e(t.popper).find("ul > li").not(".gear-menu-no-options").filter(function(){return"none"!==e(this).css("display")});a.length>0?e(t.popper).find(".gear-menu-no-options").hide():e(t.popper).find(".gear-menu-no-options").show(),e(t.popper).find(".all-files-to-zip, .selected-files-to-zip").off("click").on("click",function(o){t.hide();var i=[];e(o.target).hasClass("all-files-to-zip")&&(i=[]),e(o.target).hasClass("selected-files-to-zip")&&(i=n._helperReadArrCheckBoxes("[data-token='"+n.options.listtoken+"'] input[name='selected-files[]']")),n._actionDownloadZip(i,o)}),e(t.popper).find(".nav-upload").off("click").on("click",function(e){t.hide();var o=n.element.find(".fileupload-box");o.find(".upload-add-file:first").trigger("click")}),e(t.popper).find(".newentry").off("click").on("click",function(i){if(t.hide(),void 0!==n.searchQuery&&""!==n.searchQuery)return!1;n._actionCreateEntry(o,e(this).data("mimetype"),i)}),e(t.popper).find(".newfolder").off("click").on("click",function(i){if(t.hide(),void 0!==n.searchQuery&&""!==n.searchQuery)return!1;n._actionCreateEntry(o,e(this).data("mimetype"),i)}),!0===n.element.data("selected-all")?e(t.popper).find(".select-all").parent().hide().next().show():e(t.popper).find(".deselect-all").parent().hide().prev().show(),e(t.popper).find(".select-all").on("click",function(o){t.hide(),n.element.find(".selected-files:checkbox").prop("checked",!0),n.element.find('.entry:not(".newfolder"):not(".pf")').addClass("is-selected"),n.element.data("selected-all",!0),e(this).parent().hide().next().show(),n.updateSelectionList()}),e(t.popper).find(".deselect-all").on("click",function(o){t.hide(),n.element.find(".selected-files:checkbox").prop("checked",!1),n.element.find('.entry:not(".newfolder"):not(".pf")').removeClass("is-selected"),n.element.data("selected-all",!1),e(this).parent().hide().prev().show(),n.updateSelectionList()}),e(t.popper).find(".selected-files-move").on("click",function(e){t.hide();var o=n.element.find("input[name='selected-files[]']:checked");if(0===o.length)return!1;n._actionMoveEntries(o,"move",e)}),e(t.popper).find(".selected-files-copy").on("click",function(e){t.hide();var o=n.element.find("input[name='selected-files[]']:checked");if(0===o.length)return!1;n._actionMoveEntries(o,"copy",e)}),e(t.popper).find(".selected-files-import").on("click",function(e){t.hide();var o=n.element.find("input[name='selected-files[]']:checked");if(0===o.length)return!1;n._actionImportEntries(o,e)}),e(t.popper).find(".selected-files-delete").on("click",function(e){var t=n.element.find("input[name='selected-files[]']:checked");if(0===t.length)return!1;n._actionDeleteEntries(t,e)}),e(t.popper).find(".entry_action_deeplink_folder").off("click").on("click",function(e){t.hide(),n._actionCreateDeepLink(o,e)}),e(t.popper).find(".entry_action_shortlink_folder").off("click").on("click",function(e){t.hide(),n._actionShareEntry(o,e)})},_initSortMenu:function(){let t=this;var n=t.element[0].querySelector(".nav-sort"),o=t.element[0].querySelector(".sort-div");null!=o&&null!=n&&(e(n).on("click",function(e){e.stopPropagation()}),o.classList.remove("tippy-content-holder"),tippy(n,{trigger:"click",arrow:!1,offset:0,content:o,maxWidth:350,allowHTML:!0,placement:t.is_rtl?"bottom-start":"bottom-end",appendTo:t.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,onShow:function(e){t._initSortEvents(e)}}))},_initSortEvents:function(t){let n=this;e(t.popper).find(".nav-sorting-field").off("click").on("click",function(o){e(t.popper).find(".nav-sorting-field").removeClass("sort-selected"),e(this).addClass("sort-selected");var i=e(t.popper).find(".nav-sorting-field.sort-selected").data("field")+":"+e(t.popper).find(".nav-sorting-order.sort-selected").data("order");n.element.attr("data-sort",i),n._getFileList({}),tippy.hideAll()}),e(t.popper).find(".nav-sorting-order").off("click").on("click",function(o){e(t.popper).find(".nav-sorting-order").removeClass("sort-selected"),e(this).addClass("sort-selected");var i=e(t.popper).find(".nav-sorting-field.sort-selected").data("field")+":"+e(t.popper).find(".nav-sorting-order.sort-selected").data("order");n.element.attr("data-sort",i),n._getFileList({}),tippy.hideAll()})},_initAccountSelector:function(){let e=this;e.element.find(".nav-account-selector").on("click",function(t){e._actionSelectAccount()})},_initBrowserViewActions:function(){let t=this;e(t.element).on({mouseenter:function(){e(this).addClass("hasfocus")},mouseleave:function(){e(this).removeClass("hasfocus")},mouseover:function(){e(this).addClass("hasfocus")},touchcancel:function(t){e(this).removeClass("is-touched hasfocus")},touchend:function(n){let o=e(this).closest(".entry");if(!1===o.hasClass("hasfocus")&&!1===o.hasClass("is-selected"))return t.element.find(".hasfocus").removeClass("hasfocus"),o.addClass("hasfocus"),!(!e(n.target).hasClass("entry-info-button")&&!e(n.target).parents(".entry-info-button").length)||(t.options.infoContainer.hasClass("wpcp-info--expanded")&&t._renderInfoView(o,null),n.stopImmediatePropagation(),n.cancelable&&n.preventDefault(),!1);t.element.find(".hasfocus").removeClass("hasfocus"),o.addClass("hasfocus")},contextmenu:function(){return e(this).find(".entry-action-menu-button").trigger("click"),!1}},".entry"),e(t.element).on({click:function(n){if(e(this).hasClass("isdragged")||e(this).hasClass("newfolder"))return!1;if(!e(n.target).hasClass("entry-info-button")&&!e(n.target).parents(".entry-info-button").length){n.stopPropagation(),t.clearSearchBox(!1);var o={OutoftheBoxpath:e(this).closest(".jstree-anchor, .folder, .image-folder").attr("data-url")};t._getFileList(o),!1===t.element.find(".nav-header").visible(!0)&&e("html, body").stop().animate({scrollTop:t.element.offset().top-200},1e3)}}},".jstree-anchor, .folder, .image-folder"),e(t.element).on({click:function(n){if(void 0!==t.searchQuery&&""!==t.searchQuery)return!1;t._actionCreateEntry(e(this),e(this).data("mimetype"),n)}},".newfolder"),e(t.element).on({click:function(n){if(!e(n.target).hasClass("entry-info-button")&&!e(n.target).parents(".entry-info-button").length)if(t.options.infoContainer.hasClass("wpcp-info--expanded")&&t._renderInfoView(e(this),null),"embedded"===t.options.instance_action||"links"===t.options.instance_action)e(this).find(".entry_checkbox :checkbox").trigger("click"),n.stopPropagation();else if("shortcode_builder"===t.options.instance_action);else{if(e(n.target).hasClass("entry_link"))return!0;var o=e(this).find("a.entry_link:first()");if(t.options.supportTouch&&o.hasClass("ilightbox-group"))return o.trigger("itap"),!0;o.length&&o[0].click()}}},".entry.file"),void 0===window.inline_audio_player_container&&(window.inline_audio_player_container=e('<div id="wpcp-bottom-audioplayer" class="outofthebox"><div class="wpcp-bottom-audioplayer-main"></div></div>'),e(window.inline_audio_player_container).find(".wpcp-bottom-audioplayer-main").append('<div class="wpcp-bottom-audioplayer-title"><i class="eva eva-close eva-lg" aria-hidden="true"></i> <span></span></div>'),window.inline_audio_player=e('<audio id="wpcp-inline-audio-player" controls controlslist="nodownload" oncontextmenu="return false;"/>')[0],e(window.inline_audio_player_container).find(".wpcp-bottom-audioplayer-main").append(window.inline_audio_player),window.inline_audio_player.addEventListener("pause",function(){t.element.find(".entry-inline-player-playing").removeClass("entry-inline-player-playing")}),window.inline_audio_player.addEventListener("playing",function(){t.element.find('[data-src="'+window.inline_audio_player.src+'"]').parent().addClass("entry-inline-player-playing")}),e(window.inline_audio_player_container).prepend('<div class="wpcp-bottom-audioplayer-buttons"><a href="#" class="wpcp-bottom-audioplayer-button-prev" tabindex="0"><i class="eva eva-arrow-ios-back-outline eva-3x" aria-hidden="true"></i> <span></span></a></div>'),e(window.inline_audio_player_container).append('<div class="wpcp-bottom-audioplayer-buttons"><a href="#" class="wpcp-bottom-audioplayer-button-next" tabindex="0"><i class="eva eva-arrow-ios-forward-outline eva-3x" aria-hidden="true"></i> <span></span></a></div>'),window.inline_audio_player_container.on({click:function(n){return n.stopPropagation(),t.element.find(".entry-inline-player-playing").removeClass("entry-inline-player-playing"),window.inline_audio_player.pause(),e(this).hasClass("wpcp-bottom-audioplayer-button-prev")&&window.inline_audio_player_prev.length?window.inline_audio_player_prev.trigger("click"):e(this).hasClass("wpcp-bottom-audioplayer-button-next")&&window.inline_audio_player_next.length&&window.inline_audio_player_next.trigger("click"),!1}},".wpcp-bottom-audioplayer-button-prev, .wpcp-bottom-audioplayer-button-next"),window.inline_audio_player.addEventListener("ended",function(){t.element.find(".entry-inline-player-playing").removeClass("entry-inline-player-playing"),window.inline_audio_player.pause(),window.inline_audio_player_next.length&&window.inline_audio_player_next.trigger("click")}),window.inline_audio_player.addEventListener("error",function(e){if(e.target.error.code===MediaError.MEDIA_ERR_NETWORK){let e=window.inline_audio_player.currentTime;window.inline_audio_player.src=window.inline_audio_player.src,window.inline_audio_player.currentTime=e,window.inline_audio_player.play()}}),window.inline_audio_player_container.on({click:function(){window.inline_audio_player_container.removeClass("is-active"),window.inline_audio_player.pause()}},".wpcp-bottom-audioplayer-title"),e("body").append(window.inline_audio_player_container)),e(t.element).on({click:function(n){n.stopPropagation();var o=e(this).parents(".entry");window.inline_audio_player_prev=o.prevAll().find(".entry-inline-player").last(),window.inline_audio_player_next=o.nextAll().find(".entry-inline-player").first(),window.inline_audio_player_container.find(".wpcp-bottom-audioplayer-button-prev").attr("title",window.inline_audio_player_prev.parents(".entry").attr("data-name")),window.inline_audio_player_container.find(".wpcp-bottom-audioplayer-button-next").attr("title",window.inline_audio_player_next.parents(".entry").attr("data-name")),window.inline_audio_player_container.find(".wpcp-bottom-audioplayer-button-next,.wpcp-bottom-audioplayer-button-prev").css("visibility","visible"),window.inline_audio_player_prev.length<1&&window.inline_audio_player_container.find(".wpcp-bottom-audioplayer-button-prev").css("visibility","hidden"),window.inline_audio_player_next.length<1&&window.inline_audio_player_container.find(".wpcp-bottom-audioplayer-button-next").css("visibility","hidden"),window.inline_audio_player.src!==e(this).attr("data-src")&&(window.inline_audio_player.src=e(this).attr("data-src"),window.inline_audio_player.type=e(this).attr("type"),e(window.inline_audio_player).attr("controlslist",o.find(".entry_action_download").length?"":"nodownload").parent().find(".wpcp-bottom-audioplayer-title span").text(e(this).parents(".entry").attr("data-name"))),window.inline_audio_player.paused?(window.inline_audio_player.play(),t.element.find(".entry-inline-player-playing").removeClass("entry-inline-player-playing"),e(this).parent().addClass("entry-inline-player-playing")):window.inline_audio_player.pause(),window.inline_audio_player_container.addClass("is-active")}},".entry .entry-inline-player"),e(t.element).on({click:function(t){return t.stopPropagation(),e(this).parents(".entry").find(".entry-inline-player").trigger("click"),!1}},".use_inline_player"),e(t.element).on({click:function(n){return t.options.infoContainer.hasClass("wpcp-info--expanded")&&t._renderInfoView(e(this).closest(".entry"),null),n.stopPropagation(),!0}},".entry_checkbox"),e(t.element).on({click:function(n){var o=e(this).closest(".entry");if(n.ctrlKey||n.shiftKey){var i=t.element.find(".entry_checkbox input:checked").closest(".entry");o=i.first().nextUntil(i.last()).addBack().add(i.last()),o.find(".entry_checkbox input").prop("checked",!0)}e(this).prop("checked")?o.addClass("is-selected"):o.removeClass("is-selected"),t.updateSelectionList(),n.stopPropagation()}},".entry_checkbox :checkbox"),e(document).on({click:function(e){return e.stopPropagation(),tippy.hideAll(),t.element.find(".wpcp-info--expanded").addClass("wpcp-info--collapsed").removeClass("wpcp-info--expanded"),t.options.hasInfoOpen=!1,t.options.infoContainer.find(".wpcp-info-list").empty(),!0}},".wpcp-info-close, .wpcp-browser-container-info .wpcp-container-overlay")},updateSelectionList:function(){let e=this;e.element.find(".wpcp-breadcrumb .wpcp-selected").remove();var t=e.element.find(".is-selected").length;t&&e.element.find(".wpcp-breadcrumb").append('<li class="wpcp-selected">'+e.options.str_zip_selected.replace("(x)","("+t+")")+"</li>")},renderBrowserContent:function(t){let n=this;if(e(".ajax-filelist").get(0).scrollTo(0,0),n.element.find(".wpcp-browser--init").removeClass("wpcp-browser--init"),!1===t?(n.element.find(".nav-title").html(n.options.str_no_filelist),n.element.find(".search-input").val("").attr("placeholder",n.options.str_no_filelist),n.options.loadingContainer.addClass("error")):(n.options.loadingContainer.fadeIn(200),n.element.find(".ajax-filelist").html(t.html),t.filescount||t.folderscount||(n.element.addClass("wpcp-no-results"),n.element.find(".ajax-filelist").html("")),n.element.find(".nav-title").html(t.breadcrumb),n.raw_path=t.rawpath,null!==t.lastFolder&&n.element.attr("data-id",t.lastFolder),null!==t.lastpath&&n.element.attr("data-path",t.lastpath),null!==t.accountId&&(n.element.attr("data-account-id",t.accountId),n.options.account_id=n.element.attr("data-account-id")),n.element.removeClass("-is-virtual-folder"),!0===t.virtual&&n.element.addClass("-is-virtual-folder")),n.element.find(".wpcp-breadcrumb").one("inview",function(e,t){n.renderBreadCrumb()}),n.element.find(".nav-refresh i").removeClass("eva-spin eva-spin-center"),"grid"===n.element.attr("data-layout")&&n.element.find(".entry_thumbnail img.hidden").removeClass("hidden"),n.lazyload.update(),n.element.hasClass("wpcp-gallery")?n.renderContentForGallery():n.renderContentForBrowser(),n.lazyload.update(),n.element.data("selected-all",!1),n._initActionMenu(),n._initLightbox(),"list"===n.element.attr("data-layout")&&n._initThumbnailsPopup(),n._initMove(),n.options.loadingContainer.fadeOut(300),void 0!==n.options.focus_id&&null!==n.options.focus_id){var o=n.element.find('.entry[data-id="'+n.options.focus_id+'"]');if(o.length){o.addClass("hasfocus");var i=o.find("a.ilightbox-group");i.length>0&&(n.options.supportTouch?i.trigger("itap"):i.length&&i[0].click()),setTimeout(function(){o[0].scrollIntoView()},100)}n.options.focus_id=null}n.element.trigger("wpcp-content-loaded",n).trigger("content-loaded",n)},renderContentForBrowser:function(){let e=this;switch(this.element.attr("data-layout")){case"list":e.element.removeClass("wpcp-thumb-view").addClass("wpcp-list-view");break;case"grid":e.element.removeClass("wpcp-list-view").addClass("wpcp-thumb-view")}},renderContentForGallery:function(){let t=this;var n=t.element.find(".image-container");if(0!==n.length){var o=t.element.find(".image-collage"),i=t.element.attr("data-targetheight"),a=Math.floor(o.parent()[0].clientWidth-2);o.outerWidth(a,!0),o.removeWhitespace().collagePlus({targetHeight:i,fadeSpeed:"slow",allowPartialLastRow:!0}),t.element.find(".image-container.hidden").fadeOut(0),o.fadeTo(200,1),n.each(function(){var t=e(this).find(".folder-thumb");e(this).find(".image-folder-img").width(e(this).width()).height(e(this).height()),t.length>0&&(t.width(e(this).width()).height(e(this).height()),e(this).find(".image-folder-img").hide())}),a!==o.outerWidth()&&o.removeWhitespace().collagePlus({targetHeight:i,fadeSpeed:0,allowPartialLastRow:!0})}},_initImageFolderThumbActions:function(){let t=this;t.element.on({mousemove:function(t){var n=e(this).find(".folder-thumb"),o=t.offsetX/t.currentTarget.offsetWidth,i=Math.ceil(o*n.length)-1;n.filter(":gt(0)").stop(!0).fadeOut().filter(":eq("+i+")").stop(!0).fadeIn()},mouseleave:function(){e(this).find(".folder-thumb:gt(0)").stop(!0).fadeOut()}},".image-folder")},_initScrollToTop:function(){let t=this;if(!1!==t.options.topContainer.hasClass("wpcp-has-scroll-to-top")){var n=t.element.find(".ajax-filelist");if(0!==n.length){var o=n.next(".scroll-to-top"),i=o.find(".scroll-to-top-action"),a=o.find(".fileupload-add-button");i.on("click",function(e){t.element[0].scrollIntoView()}),a.on("click",function(e){var n=t.element.find(".fileupload-box");n.find(".upload-add-file:first").trigger("click")}),e(window).on("scroll",null,{},function(t){clearTimeout(window.scrollTimer),window.scrollTimer=setTimeout(function(){var t=e(window).scrollTop(),a=t+e(window).height(),l=n.height(),s=n.offset(),c=s.top+l;l>e(window).height()?o.show():o.hide(),t>s.top&&l>e(window).height()?i.show():i.hide(),c<a?o.addClass("scroll-to-top-bottom"):o.removeClass("scroll-to-top-bottom"),o.css({top:a-s.top-80,right:0})},50)})}}},_checkReCaptcha:function(t){return null!==t._cacheGet("WPCP_recaptcha")?t._askLogin():"undefined"==typeof grecaptcha?(setTimeout(function(){t._checkReCaptcha(t)},1e3),!1):void grecaptcha.ready(function(){grecaptcha.execute(t.options.recaptcha,{action:"wpcloudplugins"}).then(function(n){void 0===window.wpcp_recaptcha_check&&(window.wpcp_recaptcha_check=e.ajax({type:"POST",url:t.options.ajax_url,data:{action:"outofthebox-check-recaptcha",listtoken:t.options.listtoken,response:n,_ajax_nonce:t.options.recaptcha_nonce},dataType:"json"})),window.wpcp_recaptcha_check.then(function(e){if(void 0===e.verified||!0!==e.verified)return t.element.find(".nav-title").html(t.options.str_recaptcha_failed),t.options.loadingContainer.addClass("error"),!1;t._cacheSet("WPCP_recaptcha",{value:!0}),t._askLogin()},function(){return t.element.find(".nav-title").html(t.options.str_recaptcha_failed),t.options.loadingContainer.addClass("error"),!1})})})},_initMove:function(){let t=this;return!this.options.mobile&&(0!==this.element.find(".moveable").length&&(!1===e.isFunction(e.fn.droppable)||!1===e.isFunction(e.fn.draggable)?(console.log("jQuery UI Draggable/Droppable not initiated"),!1):(this.element.find(".moveable").draggable({stack:".moveable",zIndex:999999,cursor:"move",cursorAt:{top:10,left:10},
containment:t.element,helper:function(){var n=t.element.find(".moveable .entry_checkbox input:checked").closest(".moveable");0===n.length&&(n=e(this));let o=e("<div/>").attr("id","dragging_container"),i=n.clone();return i.css({"min-width":n.width()+"px"}),o.append(i),o},distance:10,delay:100,start:function(t,n){e(this).addClass("isdragged")},stop:function(t,n){var o=e(this);setTimeout(function(){o.removeClass("isdragged")},100)}}),void this.element.find(".folder, .image-folder, .jstree-anchor").droppable({accept:t.element.find(".moveable"),activeClass:"ui-state-hover",hoverClass:"ui-state-active",tolerance:"pointer",drop:function(n,o){t._actionMoveEntry(o.helper.children(),e(this))}}))))},_initLinkEvent:function(){let t=this;e(t.element).on({click:function(n){var o=e(this).closest(".entry, .entry-detail");return window.top.postMessage({slug:"outofthebox",action:"wpcp-select-entries",element_id:"#"+t.element.attr("id"),entries:[{entry_id:o.attr("data-id"),entry_name:o.attr("data-name"),account_id:t.element.attr("data-account-id"),entry_path:decodeURIComponent(o.attr("data-url")),entry_icon_url:o.find(".entry-info-icon img:first").attr("src")}]},window.location.origin),n.stopPropagation(),!0}},".entry .entry-select-item, .entry-detail .entry-select-item")},_initEntryMenuActions:function(){let t=this;var n='.OutoftheBox[data-token="'+t.options.listtoken+'"] ';!0!==e(n).data("has_entry_events_added")&&(e(document).on({click:function(t){e(this).toggleClass("menu-opened")}},n+"ul li.has-menu"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");t._actionPreviewEntry(o,n)}},n+".entry_action_view"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");if(n.stopPropagation(),!o.hasClass("folder")&&!o.hasClass("image-folder"))return t._actionDownloadEntry(o,n);t._actionDownloadZip([o.attr("data-id")],n)}},n+".entry_action_download"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");return n.stopPropagation(),t._actionExportEntry(o,n)}},n+".entry_action_export"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");o.find(".selected-files:checkbox").prop("checked",!0);var i=t.element.find("input[name='selected-files[]']:checked");n.stopPropagation(),t._actionImportEntries(i,n)}},n+".entry_action_import"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");n.stopPropagation(),tippy.hideAll(),t._actionShareEntry(o,n)}},n+".entry_action_shortlink"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");o.find(".selected-files:checkbox").prop("checked",!0);var i=t.element.find("input[name='selected-files[]']:checked");t._actionDeleteEntries(i,n)}},n+".entry_action_delete"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");o.find(".selected-files:checkbox").prop("checked",!0);var i=t.element.find("input[name='selected-files[]']:checked");t._actionMoveEntries(i,"move",n)}},n+".entry_action_move"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");o.find(".selected-files:checkbox").prop("checked",!0);var i=t.element.find("input[name='selected-files[]']:checked");t._actionMoveEntries(i,"copy",n)}},n+".entry_action_copy"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");t._actionRenameEntry(o,n)}},n+".entry_action_rename"),e(document).on({click:function(n){tippy.hideAll();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");t._actionEditDescriptionEntry(o,n)}},n+".entry_action_description"),e(document).on({click:function(n){tippy.hideAll(),n.stopPropagation();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");t._actionCreateDeepLink(o,n)}},n+".entry_action_deeplink"),e(document).on({click:function(n){tippy.hideAll(),n.stopPropagation();var o=t.element.find(".entry[data-id='"+e(this).closest("[data-id]").attr("data-id")+"']");t._renderInfoView(o,n)}},n+".entry .entry-description-button"),e(n).data("has_entry_events_added",!0))},_initActionMenu:function(){let t=this;var n=t.element[0].querySelectorAll(".entry .entry-action-menu-button");e(n).on("click",function(n){t.options.infoContainer.hasClass("wpcp-info--expanded").length&&t._renderInfoView(e(this).closest(".entry"),null),n.stopPropagation()}),tippy(n,{trigger:"click",arrow:!1,offset:0,content:function(t){return e(t).find(".tippy-content-holder").clone(!0).get(0)},maxWidth:350,allowHTML:!0,placement:t.is_rtl?"bottom-end":"bottom-start",appendTo:t.element[0],followCursor:"initial",duration:[300,0],interactive:!0,onShow:function(t){e(t.popper).find(".tippy-content-holder").removeClass("tippy-content-holder");var n=e(t.reference).closest(".entry");n.addClass("hasfocus").addClass("popupopen")},onHide:function(t){e(t.reference).closest(".entry").removeClass("hasfocus").removeClass("popupopen")}})},_renderInfoView:function(t,n,o){let i=this,a=i.options.infoContainer.find(".wpcp-info-list"),l=t.find("[data-metadata]").attr("data-metadata"),s=JSON.parse(atob(l));a.empty();let c=t.find(".entry_thumbnail img");if(c.length){let e=c.clone();e.addClass("wpcp-info-thumbnail-img"),a.parent().find(".wpcp-info-thumbnail").empty().append(e),i._initLazyLoad()}else a.parent().find(".wpcp-info-thumbnail-img").attr("src",t.find(".entry-info-icon img").attr("src"));let r=e("<div>").addClass("wpcp-info-list-item").addClass("wpcp-info-title"),d=t.find(".entry-info-icon img").clone(),p=e("<p>").html(t.find(".entry-info-name").text());r.append(d,p),a.append(r),e.each(s,function(t,n){let o=e("<div>").addClass("wpcp-info-list-item"),i=e("<p>").html(n.title),l=e("<p>").html(n.text);o.append(i,l),a.append(o)}),i.element.width()<i.breakpoints.md?i.options.infoContainer.addClass("wpcp-container-fixed"):i.options.infoContainer.removeClass("wpcp-container-fixed"),!1!==o&&(i.element.width()>i.breakpoints.md&&i.element.find(".wpcp-browser-container").width()<this.breakpoints.xs||i.element.find(".wpcp-browser-container").height()<420?i._initInfoPopup(t):i.options.infoContainer.removeClass("wpcp-info--collapsed").addClass("wpcp-info--expanded"))},_initInfoPopup:function(e){let t=this;tippy(e.find(".entry-description-button").get(0),{trigger:"click",arrow:!1,offset:0,content:function(e){let n=t.options.infoContainer.clone(!0,!0);return n.find(".wpcp-info-thumbnail").remove(),n.get(0).innerHTML},maxWidth:"none",allowHTML:!0,showOnCreate:!0,placement:t.is_rtl?"bottom-start":"bottom-end",delay:[100,null],interactiveBorder:15,appendTo:document.body,moveTransition:"transform 0.2s ease-out",interactive:!0,onShow:function(t){tippy.hideAll(),e.addClass("popupopen")},onHide:function(t){e.removeClass("popupopen")},popperOptions:{modifiers:[{name:"customClass",enabled:!0,phase:"write",fn({state:e}){e.elements.popper.classList.add("OutoftheBox")}}]}})},renderBreadCrumb:function(){let t=this,n=t.element.find(".wpcp-breadcrumb");0!==n.length&&(n.asBreadcrumbs("destroy"),n.asBreadcrumbs({namespace:"wpcp",toggleIconClass:"eva eva-arrow-down",dropdownMenuClass:"tippy-content",dropdownItem:function(e,t,n){return n?'<li class="'+e.dropdownItemClass+'"><a href="'+n+'"><i class="eva eva-folder eva-lg"></i>  '+t+"</a></li>":'<li class="'+e.dropdownItemClass+" "+e.dropdownItemDisableClass+'"><a href="#"><i class="eva eva-folder eva-lg"></i>  '+t+"</a></li>"}}),n.on({click:function(t){n.find('li a.folder[href="'+e(this).find("a").attr("href")+'"]').trigger("click"),n.find(".wpcp-dropdown").removeClass("dropdown-open")}},".tippy-content li"),n.on({click:function(e){n.find(".wpcp-dropdown").addClass("dropdown-open")}},".wpcp-toggle"),e(document).on({mouseup:function(e){var t=n.find(".tippy-content");t.is(e.target)||0!==t.has(e.target).length||t.parent().removeClass("open")}}))},_initThumbnailsPopup:function(){let t=this;var n=t.element.find(".entry .entry-thumbnail-button"),o=n.parents(".entry.file").toArray();e(n).on({click:function(t){t.stopPropagation();const n=e(this).parents(".entry")[0]._tippy;n.show()},mouseenter:function(t){const n=e(this).parents(".entry")[0]._tippy;n.show()}}),tippy(o,{trigger:"mouseenter focus",arrow:!1,content:function(t){return e(t).find(".entry_thumbnail-view-center").clone(!0).get(0)},maxWidth:"none",allowHTML:!0,placement:"top",delay:[1e3,null],duration:[250,0],offset:[0,0],appendTo:t.element[0],moveTransition:"transform 0.2s ease-out",interactive:!0,onShow:function(t){tippy.hideAll(),e(t.reference).addClass("popupopen");let n=e(t.popper).find("img");n.attr("src",n.attr("data-src-retina")),e(t.popper).find("div.preloading").remove()},onHide:function(t){e(t.reference).removeClass("popupopen")}})},_initLazyLoad:function(){let t=this;t.lazyload=new LazyLoad({data_src:window.devicePixelRatio>1?"src-retina":"src",elements_selector:"img.preloading",threshold:250,unobserve_entered:!0,use_native:!1,class_applied:"wpcp-lazy-applied",class_loading:"wpcp-lazy-loading",class_loaded:"wpcp-lazy-loaded",class_error:"wpcp-lazy-error",callback_loaded:function(n){if(e(n).removeClass("preloading").removeAttr("data-src"),e(n).prev(".preloading").remove(),"list"===t.element.attr("data-layout")){var o=t.element.find('.entry[aria-expanded="true"]');o.length&&void 0!==o[0]._tippy&&o[0]._tippy.popperInstance.update()}},callback_load:function(t){e(t).removeClass("preloading").removeAttr("data-src"),e(t).prev(".preloading").remove()},callback_error:function(n){void 0!==e(n).attr("data-src-backup")&&!1!==e(n).attr("data-src-backup")?n.src=e(n).attr("data-src-backup"):n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",e(n).removeAttr("data-src"),e(n).prev(".preloading").remove();var o=t.element.find('.entry[aria-expanded="true"]');o.length&&void 0!==o[0]._tippy&&o[0]._tippy.destroy(),o.find(".entry-thumbnail-button").remove()}})},_initNavMenu:function(){let e=this;this._initSearchBox(),this._initNavActionMenu(),this._initSortMenu(),this._initAccountSelector(),e.element.on({click:function(t){e.clearSearchBox(),e.options.forceRefresh=!0,e._getFileList({})}},".nav-refresh"),e.element.on({click:function(t){e.clearSearchBox(),e.element.attr("data-path",e.element.attr("data-org-path")),e._getFileList({OutoftheBoxpath:e.element.attr("data-org-path")})}},".nav-home")},_initLightbox:function(){var t,n,o=this,i="1"===o.element.attr("data-lightboxnav"),a="1"===o.element.attr("data-lightboxthumbs"),l=!1,s=!1,c=!1,r=!1;o.options.lightbox_showheader=o.options.topContainer.hasClass("files")?"true":o.options.lightbox_showheader,"click"===o.options.lightbox_showheader?t=s="click":"mouseenter"===o.options.lightbox_showheader?(t=o.options.lightbox_showheader,s="mouseleave"):"false"==o.options.lightbox_showheader||"No"==o.options.lightbox_showheader?(t=!1,s=!1):(l=!0,t=!0,s=!0),"click"===o.options.lightbox_showcaption?n=r="click":"mouseenter"===o.options.lightbox_showcaption?(n=o.options.lightbox_showcaption,r="mouseleave"):"false"==o.options.lightbox_showcaption||"No"==o.options.lightbox_showcaption?(n=!1,r=!1):(c=!0,n=!0,r=!0);var d={WPCP:this,skin:"OutoftheBox "+this.options.content_skin+" wpcp-lightbox "+this.options.lightbox_skin,path:this.options.lightbox_path,maxScale:1,minScale:.05,infinite:!0,slideshow:{pauseOnHover:!1,pauseTime:o.element.attr("data-pausetime"),startPaused:"gallery"!==o.element.attr("data-list")||"1"!==o.element.attr("data-slideshow")},controls:{slideshow:!("gallery"!==o.element.attr("data-list")||!i),arrows:!!i,thumbnail:a},caption:{start:c,show:n,hide:r},headerHeight:50,header:{start:l,show:t,hide:s},thumbnails:{normalOpacity:.9,activeOpacity:1,maxHeight:100},show:{effect:!1},hide:{effect:!1},overlay:{opacity:1},keepAspectRatio:!0,callback:{onBeforeLoad:function(t,n){e(".ilightbox-holder").attr("data-token",o.options.listtoken),e(".ilightbox-holder .oftb-hidepopout").remove(),"0"===o.element.attr("data-popout")&&e(".ilightbox-holder").find(".oftb-embedded").after('<div class="oftb-hidepopout">&nbsp;</div>');var i=e(".ilightbox-holder").find("iframe").addClass("oftb-embedded");o._helperIframeFix(i)},onBeforeChange:function(t){var n=e(".ilightbox-holder video, .ilightbox-holder audio");e.each(n,function(e,t){!1===t.paused&&t.pause()})},onAfterChange:function(e){},onRender:function(t,n){var o=e(".ilightbox-holder").find("video, audio");e.each(o,function(t,n){var o=e(this);e(this).find("source").attr("src",o.find("source").attr("data-src"))})},onShow:function(t){var n;"always"===o.options.lightbox_thumbnailbar&&e(".ilightbox-thumbnails, .ilightbox-holder").addClass("ilightbox-thumbnails-always-visible"),0===t.currentElement.find(".empty_iframe").length&&t.currentElement.find(".oftb-embedded").after(o.options.str_iframe_loggedin),t.currentElement.find("iframe").length>0&&(t.currentElement.find("iframe").on("load",function(){t.currentElement.find(".empty_iframe").removeClass("visible"),t.currentElement.removeClass("iframe-loading"),clearTimeout(n)}).on("error",function(){t.currentElement.find(".empty_iframe").addClass("visible")}),t.currentElement.addClass("iframe-loading"),n=setTimeout(function(){t.currentElement.find(".empty_iframe").addClass("visible"),t.currentElement.find(".empty_iframe_link").attr("href",t.currentElement.find("iframe").attr("src"))},1e4)),t.currentElement.find(".empty_iframe").removeClass("visible"),0===t.currentElement.find("img").length&&(n=setTimeout(function(){t.currentElement.find(".empty_iframe").addClass("visible"),t.currentElement.find(".empty_iframe_link").attr("href",t.currentElement.find("iframe").attr("src"))},1e4));var i=t.currentElement.find("video, audio");e("video, audio").each(function(n,o){!1===e.contains(t.currentElement.get(0),o)?o.pause():o.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&o.play()}),e.each(i,function(e,t){t.addEventListener("canplay",e=>{t.play().then(()=>{}).catch(e=>{!1===navigator.userActivation.hasBeenActive&&(t.muted=!0),t.play().then(()=>{}).catch(e=>{t.muted=!1})})},{once:!0})});var a=this;new LazyLoad({data_src:window.devicePixelRatio>1?"src-retina":"src",unobserve_entered:!0,threshold:50,use_native:!1,elements_selector:".ilightbox-thumbnail img.preloading",class_applied:"wpcp-lazy-applied",class_loading:"wpcp-lazy-loading",class_loaded:"wpcp-lazy-loaded",class_error:"wpcp-lazy-error",callback_loaded:function(t){e(t).removeClass("preloading preloading-lightbox-thumbnail"),e(t).prev(".preloading").remove(),e(t).parent().data({naturalWidth:t.width,naturalHeight:t.height}),a.positionThumbnails(null,null,null)},callback_load:function(t){e(t).removeClass("preloading preloading-lightbox-thumbnail"),e(t).prev(".preloading").remove(),e(t).parent().data({naturalWidth:t.width,naturalHeight:t.height}),a.positionThumbnails(null,null,null)}}),e(".ilightbox-container .oftb-hidepopout").on("contextmenu",function(e){return!1}),e(".ilightbox-container .ilightbox-wrapper, .ilightbox-container img, .ilightbox-container video, .ilightbox-container audio").on("contextmenu",function(e){return"Yes"===o.options.lightbox_rightclick||(e.preventDefault(),e.stopPropagation(),!1)});var l=t.currentElement.find(".ilightbox-container [src]");if(l.length>0&&1!==l.data("logged")){var s=e('a[href="'+l.attr("src")+'"]').closest(".entry").data("id");l.data("logged",1),o._logEvent("log_preview_event",s)}o.element.find(".entry").removeClass("active-lightbox-item"),o.element.find('.entry.file[data-id="'+t.currentElement.find("[data-entry-id]").attr("data-entry-id")+'"]').addClass("active-lightbox-item")},onHide:function(){o.element.find(".entry").removeClass("active-lightbox-item")}},errors:{loadImage:o.options.str_imgError_title,loadContents:o.options.str_xhrError_title},text:{next:o.options.str_next_title,previous:o.options.str_previous_title,slideShow:o.options.str_startslideshow},candownload:o.element.find(".entry_action_download").length};if(i){e.isEmptyObject(this.lightBox)||o.lightBox.destroy();var p=o.element.find(".ilightbox-group");o.lightBox=p.WPCP_iLightBox(d)}else e.isEmptyObject(this.lightBox)||e.each(this.lightBox,function(){this.destroy()}),o.lightBox=[],o.element.find(".ilightbox-group").each(function(){o.lightBox.push(e(this).WPCP_iLightBox(d))})},_actionCreateDeepLink:function(t){let n=this;var o,i,a,l,s,c,r=n.element.attr("data-account-id");!1===t.hasClass("entry")?(o=n.element.attr("data-url"),l=n.element.find(".wpcp-breadcrumb li:last").text(),s=n.element.attr("data-path"),i=!0):(i=t.hasClass("folder")||t.hasClass("image-folder"),o=t.attr("data-url"),l=t.attr("data-name"),c=t.find("img").attr("src"),a=i?null:t.attr("data-id"),s=i?o:n.element.attr("data-path"));var d={source:n.element.attr("data-source"),account_id:r,last_path:s,focus_id:a},p=btoa(encodeURIComponent(JSON.stringify(d))),u=new URL(window.location),m=new URLSearchParams(u.search);m.set("wpcp_link",p),u.search=m.toString(),e("#wpcp-modal-action").remove();let h=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${n.options.str_close_title}">${n.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="confirm" type="button" title="${n.options.str_create_shared_link}">${n.options.str_create_shared_link}</button>`,f=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${n.options.str_direct_link}</h2>                            \n                    <a tabindex="0" class="close-button" title="${n.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),w=e('<div class="wpcp-modal-body" tabindex="0" ></div>'),_=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${h}</div></div>`),v=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${n.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(v),e("#wpcp-modal-action .modal-content").append(f,w,_),e.ajax({type:"POST",url:n.options.ajax_url,data:{action:"outofthebox-shorten-url",account_id:r,listtoken:n.options.listtoken,OutoftheBoxpath:o,url:u.toString(),page_url:document.location.href,_ajax_nonce:n.options.shortenurl_nonce},complete:function(){e("#wpcp-modal-action .wpcp-modal-confirm-btn").remove()},success:function(t){if(null!==t)if(null!==t.url){e(".wpcp-modal-body").append(`<input type="text" class="shared-link-url" value="${t.url}" style="width: 98%;" readonly/><div class="shareon outofthebox-shared-social"></div>`),sendAnalyticsOFTB("Create deeplink",l);var o=e("#wpcp-modal-action .outofthebox-shared-social");o.attr("data-url",t.url),o.attr("data-title",l+" | "),e.each(n.options.share_buttons,function(e,t){o.append(`<a class="${t}" title="${n.options.str_shareon} ${t.charAt(0).toUpperCase()+t.slice(1)}" data-media="${c}" data-imageurl="${c}" data-image="${c}"></a>`)}),Shareon.init();e(".shareon .email").attr("href","mailto:?subject="+l+" | &body="+encodeURIComponent(t.url));var i=new ClipboardJS(".shareon .clipboard",{text:function(t){return e(".shared-link-url").val()}});i.on("success",function(t){e(".shareon .clipboard").addClass("clipboard-check"),t.clearSelection()}),i.on("error",function(){n.options.mobile?e(".shared-link-url").select():window.prompt("Copy to clipboard: Ctrl+C, Enter",e(".shared-link-url").val())})}else e(".wpcp-modal-body").find(".shared-link-url").val(t.error)},dataType:"json"});let g=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){g.keydown(e)},!1),g.open(),window.modal_action=g,e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+n.options.str_processing+"</span>"),!1},_logEvent:function(t,n,o){let i=this;if("0"===i.options.log_events)return!1;void 0===o&&(o={}),e.ajax({type:"POST",url:i.options.ajax_url,data:{action:"outofthebox-event-log",account_id:i.options.account_id,listtoken:i.options.listtoken,type:t,id:n,data:o,page_url:document.location.href,_ajax_nonce:i.options.log_nonce}})},_actionPreviewEntry:function(e,t){let n=this;var o=e.find(".entry_link");n.options.supportTouch&&o.hasClass("ilightbox-group")?o.trigger("itap"):o[0].click()},_actionDownloadEntry:function(t,n){sendAnalyticsOFTB("Download",t.attr("data-name"));var o=e('<div><i class="eva eva-settings-outline eva-spin eva-1x eva-fw"></i></div>').css({"margin-right":"5px",display:"inline-grid"}).delay(5e3).fadeOut("slow",function(){e(this).remove()});t.find(".entry-info-name span").prepend(o),setTimeout(function(){return!0},300)},_actionDownloadZip:function(t,n){let o=this;e("#wpcp-modal-action").remove();let i=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${o.options.str_zip_title}</h2>                            \n                    <a tabindex="0" class="close-button" title="${o.options.str_close_title}"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),a=e('<div class="wpcp-modal-body" tabindex="0" ><div class="zip-loading-bar label-center" data-preset="circle" data-value="0"></div><div class="zip-status">'+o.options.str_processing+"</div></div>"),l=e('<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-modal-as-bar wpcp-theme-'+o.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');e("body").append(l),e("#wpcp-modal-action .modal-content").append(i,a),o.zip_download_bar=new ldBar(a.find(".zip-loading-bar").get(0),{preset:"circle"}),o._zipDownload(t),e("#wpcp-modal-action .close-button").off("click"),e("#wpcp-modal-action .close-button").on("click",function(e){document.getElementById("hiddenDownloader").remove(),s.close()});let s=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){s.keydown(e)},!1),s.open(),window.modal_action=s,e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>"),!1},_zipDownload:function(t,n){let o=this;void 0===n&&(n=(new Date).getTime());var i={action:"outofthebox-create-zip",type:"do-zip",request_id:n,account_id:o.options.account_id,listtoken:o.options.listtoken,lastpath:o.element.attr("data-path"),_ajax_nonce:o.options.createzip_nonce,files:t};o._helperDownloadUrlInline(o.options.ajax_url+"?"+e.param(i)),setTimeout(function(){o._watchZipProgres(n)},4e3)},_watchZipProgres:function(t){let n=this;n._getZipProgress(t).then(function(o){if(e.isEmptyObject(o)||void 0===o.status||"failed"===o.status.progress||null===document.getElementById("hiddenDownloader"))e("#wpcp-modal-action").remove();else{if(e(".zip-status").html(o.status.progress_str),n.zip_download_bar.set(o.status.percentage),"finished"===o.status.progress)return e("#wpcp-modal-action .zip-loading-bar").remove(),void e("#wpcp-modal-action").fadeIn().delay(2e3).fadeOut();setTimeout(function(){n._watchZipProgres(t)},2e3)}})},_getZipProgress:function(t){let n=this;return e.ajax({type:"POST",url:n.options.ajax_url,data:{action:"outofthebox-create-zip",type:"get-progress",request_id:t,account_id:n.options.account_id,listtoken:n.options.listtoken,lastpath:n.element.attr("data-path"),page_url:document.location.href,_ajax_nonce:n.options.createzip_nonce},dataType:"json"})},_actionImportEntries:function(t,n){e("#wpcp-modal-action").remove();var o=this,i="",a=[];e.each(t,function(){var t=e(this).val();if(!1===a.includes(t)){var n=e(this).closest(".entry"),o=n.find("img:first()"),l=e('<div class="wpcp-modal-file-icon">');o.length>0&&o.clone().appendTo(l),i+="<li>"+l.html()+"<span>"+n.attr("data-name")+"</span></li>",a.push(t)}});let l=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${o.options.str_close_title}">${o.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="confirm" type="button" title="${o.options.str_import}">${o.options.str_import} (${a.length})</button>`,s=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${o.options.str_import_title}</h2>                            \n                    <a tabindex="0" class="close-button" title="${o.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),c=e(`<div class="wpcp-modal-body" tabindex="0" ><ul class="wpcp-list-vertical">${i}</ul></div>`),r=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${l}</div></div>`),d=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${o.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(d),e("#wpcp-modal-action .modal-content").append(s,c,r),e("#wpcp-modal-action .wpcp-modal-confirm-btn").on("click",function(t){e.ajax({type:"POST",url:o.options.ajax_url,data:{listtoken:o.options.listtoken,account_id:o.element.attr("data-account-id"),lastpath:o.element.attr("data-path"),action:"outofthebox-import-entries",entries:a,page_url:document.location.href,_ajax_nonce:o.options.import_nonce},beforeSend:function(){e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>")},complete:function(){void 0!==p&&p.close()},dataType:"json"}),e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>")});let p=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){p.keydown(e)},!1),p.open(),window.modal_action=p,1===a.length&&e("#wpcp-modal-action .wpcp-modal-confirm-btn").trigger("click"),!1},_actionShareEntry:function(t,n){let o=this;var i=o.element.attr("data-account-id"),a=(t.closest("ul").attr("data-path"),t.attr("data-url")),l=t.attr("data-name"),s=t.find("img").attr("src");t.hasClass("entry_action_shortlink_folder")&&(a=o.element.attr("data-path")),!1===t.hasClass("entry")&&(a=o.element.attr("data-path"),l=o.element.find(".wpcp-breadcrumb li:last").text()),e("#wpcp-modal-action").remove();let c=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${o.options.str_close_title}">${o.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="confirm" type="button" title="${o.options.str_create_shared_link}">${o.options.str_create_shared_link}</button>`,r=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${o.options.str_share_link}</h2>                            \n                    <a tabindex="0" class="close-button" title="${o.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),d=e('<div class="wpcp-modal-body" tabindex="0" ></div>'),p=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${c}</div></div>`),u=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${o.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(u),e("#wpcp-modal-action .modal-content").append(r,d,p),e.ajax({type:"POST",url:o.options.ajax_url,data:{action:"outofthebox-create-link",account_id:i,listtoken:o.options.listtoken,OutoftheBoxpath:a,page_url:document.location.href,_ajax_nonce:o.options.createlink_nonce},complete:function(){e("#wpcp-modal-action .wpcp-modal-confirm-btn").remove()},success:function(t){if(null!==t)if(null!==t.link){t.link=t.link.replace("dl=1",""),e(".wpcp-modal-body").append(`<input type="text" class="shared-link-url" value="${t.link}" style="width: 98%;" readonly/><div class="shareon outofthebox-shared-social"></div>`),sendAnalyticsOFTB("Create shared link",l);var n=e("#wpcp-modal-action .outofthebox-shared-social");n.attr("data-url",t.link),n.attr("data-title",l+" | "),e.each(o.options.share_buttons,function(e,t){n.append(`<a class="${t}" title="${o.options.str_shareon} ${t.charAt(0).toUpperCase()+t.slice(1)}" data-media="${s}" data-imageurl="${s}" data-image="${s}"></a>`)}),Shareon.init();e(".shareon .email").attr("href","mailto:?subject="+l+" | &body="+encodeURIComponent(t.link));var i=new ClipboardJS(".shareon .clipboard",{text:function(t){return e(".shared-link-url").val()}});i.on("success",function(t){e(".shareon .clipboard").addClass("clipboard-check"),t.clearSelection()}),i.on("error",function(){o.options.mobile?e(".shared-link-url").select():window.prompt("Copy to clipboard: Ctrl+C, Enter",e(".shared-link-url").val())})}else e(".wpcp-modal-body").find(".shared-link-url").val(t.error)},dataType:"json"});let m=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){m.keydown(e)},!1),m.open(),window.modal_action=m,e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>"),!1},_actionCreateEntry:function(t,n,o){let i=this;e("#wpcp-modal-action").remove();let a=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${i.options.str_close_title}">${i.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="rename" type="button" title="${i.options.str_create_title}">${i.options.str_create_title}</button>`;var l=`<input type="text" id="wpcp-modal-create-entry-input" name="wpcp-modal-create-entry-input" placeholder="${i.options.str_enter_name}" value="" style="width:100%"/>`
;let s=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${0===n.length?i.options.str_create_folder:i.options.str_create_document}</h2>                            \n                    <a tabindex="0" class="close-button" title="${i.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),c=e(`<div class="wpcp-modal-body" tabindex="0"> ${l}</div>`),r=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${a}</div></div>`),d=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${i.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(d),e("#wpcp-modal-action .modal-content").append(s,c,r),e("#wpcp-modal-action #wpcp-modal-create-entry-input").on("keyup",function(t){13!=t.which&&13!=t.keyCode||e("#wpcp-modal-action .wpcp-modal-confirm-btn").trigger("click")}),e("#wpcp-modal-action .wpcp-modal-confirm-btn").on("click",function(t){var o=e("#wpcp-modal-create-entry-input").val();if(/[<>:"/\\|?*]/g.test(e("#wpcp-modal-create-entry-input").val()))e("#wpcp-modal-action .wpcp-modal-error").remove(),e("#wpcp-modal-create-entry-input").after('<div class="wpcp-modal-error">'+i.options.str_rename_failed+"</div>"),e("#wpcp-modal-action .wpcp-modal-error").fadeIn();else{var a={action:"outofthebox-create-entry",mimetype:n,name:encodeURIComponent(o),_ajax_nonce:i.options.createentry_nonce};i._actionDoModifyEntry(a),e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+i.options.str_processing+"</span>")}});let p=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){p.keydown(e)},!1),p.open(),window.modal_action=p,!1},_actionRenameEntry:function(t,n){let o=this;t.closest("ul").attr("data-path");var i=t.attr("data-name"),a=t.attr("data-url");e("#wpcp-modal-action").remove();let l=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${o.options.str_close_title}">${o.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="rename" type="button" title="${o.options.str_rename_title}">${o.options.str_rename_title}</button>`;var s='<input id="wpcp-modal-rename-input" name="wpcp-modal-rename-input" type="text" value="'+i+'" style="width:100%"/>';let c=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${o.options.str_rename_title}</h2>                            \n                    <a tabindex="0" class="close-button" title="${o.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),r=e(`<div class="wpcp-modal-body" tabindex="0" >${s}</div>`),d=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${l}</div></div>`),p=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${o.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(p),e("#wpcp-modal-action .modal-content").append(c,r,d),e("#wpcp-modal-action #wpcp-modal-rename-input").on("keyup",function(t){13!=t.which&&13!=t.keyCode||e("#wpcp-modal-action .wpcp-modal-confirm-btn").trigger("click")}),e("#wpcp-modal-action .wpcp-modal-confirm-btn").on("click",function(t){var n=e("#wpcp-modal-rename-input").val();if(/[<>:"/\\|?*]/g.test(e("#wpcp-modal-rename-input").val()))e("#wpcp-modal-action .wpcp-modal-error").remove(),e("#wpcp-modal-rename-input").after('<div class="wpcp-modal-error">'+o.options.str_rename_failed+"</div>"),e("#wpcp-modal-action .wpcp-modal-error").fadeIn();else{var i={action:"outofthebox-rename-entry",OutoftheBoxpath:a,newname:encodeURIComponent(n),_ajax_nonce:o.options.rename_nonce};o._actionDoModifyEntry(i),e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>")}});let u=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){u.keydown(e)},!1),u.open(),window.modal_action=u,!1},_actionEditDescriptionEntry:function(t,n){let o=this;var i=t.attr("data-id"),a=o.element.attr("data-account-id"),l=t.find(".description-text").html()||t.find("[data-caption]").attr("data-caption");void 0===l&&(l=""),e("#wpcp-modal-action").remove();let s=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${o.options.str_close_title}">${o.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="editdescription" type="button" title="${o.options.str_save_title}">${o.options.str_save_title}</button>`,c=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${o.options.str_edit_description}</h2>                            \n                    <a tabindex="0" class="close-button" title="${o.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),r=e(`<div class="wpcp-modal-body" tabindex="0" ><textarea id="wpcp-modal-description-input" name="wpcp-modal-description-input" style="width:100%" rows="8" placeholder="${o.options.str_add_description}"></textarea></div>`),d=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${s}</div></div>`),p=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${o.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(p),e("#wpcp-modal-action .modal-content").append(c,r,d),e("#wpcp-modal-description-input").val(l.replace(/<br\s?\/?>/g,"\r")),e("#wpcp-modal-action #wpcp-modal-description-input").on("keyup",function(t){13!=t.which&&13!=t.keyCode||e("#wpcp-modal-action .wpcp-modal-description-btn").trigger("click")}),e("#wpcp-modal-action .wpcp-modal-confirm-btn").on("click",function(t){var n=e("#wpcp-modal-description-input").val(),l={action:"outofthebox-edit-description-entry",account_id:a,id:i,newdescription:n,listtoken:o.options.listtoken,_ajax_nonce:o.options.description_nonce};o._actionDoModifyEntry(l),e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>")});let u=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){u.keydown(e)},!1),u.open(),window.modal_action=u,!1},_actionMoveEntry:function(t,n,o){let i=this;var a=[];e.each(t,function(){a.push(e(this).attr("data-id"))});var l={action:"outofthebox-move-entries",entries:a,copy:!1,target:n.attr("data-url"),_ajax_nonce:i.options.move_nonce};i._actionDoModifyEntry(l)},_actionMoveEntries:function(t,n,o){e("#wpcp-modal-action").remove();var i=this,a=[];e.each(t,function(){var t=e(this).val();!1===a.includes(t)&&a.push(t)});var l=i.options.str_move_title,s="outofthebox-move-entries",c=i.options.move_nonce;"copy"===n&&(l=i.options.str_copy_title,s="outofthebox-copy-entries",c=i.options.copy_nonce);let r=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${i.options.str_close_title}">${i.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="confirm" type="button" title="${l}">${l} (${a.length})</button>`,d=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${l}</h2>                            \n                    <a tabindex="0" class="close-button" title="${i.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),p=e('<div class="wpcp-modal-body" tabindex="0" ><div id="wpcp-modal-folder-selector"></div></div>'),u=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${r}</div></div>`),m=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${i.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(m),e("#wpcp-modal-action .modal-content").append(d,p,u),i.options.topContainer.clone().appendTo("#wpcp-modal-folder-selector").removeClass("gallery").addClass("files"),e("#wpcp-modal-folder-selector").find(".ajax-filelist").html(""),e("#wpcp-modal-folder-selector .OutoftheBox").attr("data-list","files").attr("data-layout","list").OutoftheBox(OutoftheBox_vars),e("#wpcp-modal-action .wpcp-modal-confirm-btn").on("click",function(t){var n={action:s,entries:a,target:e("#wpcp-modal-folder-selector .OutoftheBox").attr("data-path"),_ajax_nonce:c};i._actionDoModifyEntry(n),e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+i.options.str_processing+"</span>")});let h=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){h.keydown(e)},!1),h.open(),window.modal_action=h,!1},_actionDeleteEntries:function(t,n){e("#wpcp-modal-action").remove();var o=this,i="",a=[];e.each(t,function(){var t=e(this).closest(".entry"),n=t.find("img:first()"),o=e('<div class="wpcp-modal-file-icon">');n.length>0&&n.clone().appendTo(o),i+="<li>"+o.html()+"<span>"+t.attr("data-name")+"</span></li>",a.push(e(this).val())});let l=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${o.options.str_close_title}">${o.options.str_close_title}</button>\n            <button class="button wpcp-modal-confirm-btn" data-action="confirm" type="button" title="${o.options.str_delete_title}">${o.options.str_delete_title} (${a.length})</button>`,s=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${o.options.str_move_title}</h2>                            \n                    <a tabindex="0" class="close-button" title="${o.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),c=e('<div class="wpcp-modal-body" tabindex="0" >'+o.options.str_delete+'<br/><br/><ul class="wpcp-list-vertical">'+i+"</ul></div>"),r=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${l}</div></div>`),d=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${o.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(d),e("#wpcp-modal-action .modal-content").append(s,c,r),e("#wpcp-modal-action .wpcp-modal-confirm-btn").on("click",function(t){var n={action:"outofthebox-delete-entries",entries:a,_ajax_nonce:o.options.delete_nonce};o._actionDoModifyEntry(n),e("#wpcp-modal-action .wpcp-modal-confirm-btn").prop("disabled",!0),e("#wpcp-modal-action .wpcp-modal-confirm-btn").html('<i class="eva eva-settings-outline eva-spin eva-fw"></i><span> '+o.options.str_processing+"</span>")});let p=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){p.keydown(e)},!1),p.open(),window.modal_action=p,!1},_actionSelectAccount:function(){e("#wpcp-modal-action").remove();let t=this,n=`\n            <button class="button wpcp-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="window.modal_action.close();" title="${t.options.str_close_title}">${t.options.str_close_title}</button>`,o=e(`<div class="wpcp-modal-header" tabindex="0">\n                    <h2>${t.options.str_select_account}</h2>                            \n                    <a tabindex="0" class="close-button" title="${t.options.str_close_title}" onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>`),i=e('<div class="wpcp-modal-body modal-account-selector" tabindex="0" style="text-align: center;"><div class="nav-account-selector-content">'+t.element.find(".nav-account-selector-content").html()+"</div></div>"),a=e(`<div class="wpcp-modal-footer"><div class="wpcp-modal-buttons">${n}</div></div>`),l=e(`<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-theme-${t.options.content_skin}"><div class="modal-dialog"><div class="modal-content"></div></div></div>`);e("body").append(l),e("#wpcp-modal-action .modal-content").append(o,i,a),e("#wpcp-modal-action .nav-account-selector").on("click",function(n){e(".nav-account-selector").removeClass("account-active"),e('.nav-account-selector[data-account-id="'+e(this).attr("data-account-id")+'"]').addClass("account-active"),t.element.find(".nav-account-selector:first").html(e(this).html()),t.element.attr("data-id",""),t.element.attr("data-path",""),t.element.attr("data-account-id",e(this).attr("data-account-id")),t.options.account_id=e(this).attr("data-account-id"),t.clearSearchBox(),t._getFileList({}),s.close()});let s=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(e){s.keydown(e)},!1),s.open(),window.modal_action=s,!1},_actionDoModifyEntry:function(t){let n=this;var o=n.element.attr("data-path");t.listtoken=this.options.listtoken,t.lastpath=o,t.account_id=n.element.attr("data-account-id"),t.page_url=document.location.href,e.ajax({type:"POST",url:n.options.ajax_url,data:t,beforeSend:function(){n.options.loadingContainer.fadeIn(400)},success:function(e){void 0!==e&&void 0!==e.lastpath&&null!==e.lastpath&&n.element.attr("data-path",e.lastpath)},complete:function(){"undefined"!=typeof modal_action&&modal_action.close(),n.options.forceRefresh=!0,n._getFileList({})},dataType:"json"})},_initResizeHandler:function(){let t=this;if("ResizeObserver"in window){const e=document.documentElement,n=new ResizeObserver(()=>{t._orgininal_width!==t.element.width()&&(t._orgininal_width=t.element.width(),t._refreshView(),t._addBreakpointClass())});n.observe(e)}else e(window).on("resize",function(){t._orgininal_width!==t.element.width()&&(t._orgininal_width=t.element.width(),t._refreshView(),t._addBreakpointClass())})},_addBreakpointClass:function(){let e=this;if(e._orgininal_width<e.breakpoints.xxl){var t="";for(var n in e.breakpoints)if(e._orgininal_width<e.breakpoints[n]){t=n;break}e.options.topContainer.removeClass("wpcp-size-xxxs wpcp-size-xxs wpcp-size-xs wpcp-size-sm wpcp-size-md wpcp-size-lg wpcp-size-xl wpcp-size-xxl").addClass("wpcp-size-"+t)}},_refreshView:function(){let e=this;!1!==e.options.topContainer.hasClass("gallery")&&(void 0!==e.resizeTimer&&clearTimeout(e.resizeTimer),e.element.find(".image-collage").fadeTo(100,0),e.resizeTimer=setTimeout(function(){e.renderContentForGallery()},100))},_pipeline:function(t,n){let o=this;var i=e.extend({url:o.options.ajax_url,data:null,method:"POST"},t);return function(t,a){var l=i.data(t);e.extend(t,l);var s="wpcp-"+(t.listtoken+t._ajax_nonce+(void 0===t.account_id?"":t.account_id)+(void 0===t.OutoftheBoxpath?"":t.OutoftheBoxpath)+t.lastpath+t.sort+t.query),c="wpcp-"+WPCPhashCode(s)+"-data";if(o.options.clearLocalCache&&(o._cacheRemove("all"),o.options.clearLocalCache=!1),o.options.forceRefresh&&(o._cacheRemove("all"),t.hardrefresh=!0,o.options.forceRefresh=!1),t.sort.includes("shuffle")&&o._cacheRemove(c),null!==o._cacheGet(c)){var r=o._cacheGet(c);if(r===Object(r))return r.draw=t.draw,n(r),!0;o._cacheRemove(c)}void 0!==a.jqXHR&&null!==a.jqXHR&&a.jqXHR.abort(),t.page_url=document.location.href,a.jqXHR=e.ajax({type:i.method,url:i.url,data:t,dataType:"json",cache:!1,beforeSend:function(){},success:function(e){if(e!==Object(e))return o.element.trigger("ajax-error",[e,t,a.jqXHR]),o._cacheRemove("all"),n(!1),!1;o.element.trigger("ajax-success",[e,t,a.jqXHR]);var i=new Date;i.setMinutes(i.getMinutes()+5),e.expires=i.getTime(),o._cacheSet(c,e),n(e)},error:function(e){if(401===a.jqXHR.status){let e=o.element.find(".wpcp-login-container");e.removeClass("wpcp-login-unlocked")&&e.fadeIn("slow");let t=o.element.find(".wpcp-lead-container");t.removeClass("wpcp-lead-unlocked")&&t.fadeIn("slow")}return o.element.trigger("ajax-error",[e,t,a.jqXHR]),o._cacheRemove("all"),(void 0===t.query||""===t.query||0!==a.jqXHR.status||"abort"!==a.jqXHR.statusText)&&(n(!1),!1)}})}},_initCache:function(){let e=this;e._isCacheStorageAvailable=e._cacheStorageAvailable(),setInterval(function(){e._cacheRemove("all")},9e5)},_cacheStorageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}},_cacheGet:function(e,t){var n;if(void 0===t&&(t=!0),!e.includes("-current")&&("localhost"===window.location.host||window.location.host.startsWith("192.168.")||window.location.host.endsWith(".local")))return null;if(this._isCacheStorageAvailable)n=JSON.parse(t?localStorage.getItem(e):sessionStorage.getItem(e));else{if(void 0===this.cache[e])return null;n=this.cache[e]}if(null===n)return n;if(void 0===n.expires){var o=new Date;o.setMinutes(o.getMinutes()+5),n.expires=o.getTime()}return null!==n.expires&&n.expires<(new Date).getTime()?(this._cacheRemove(e,t),null):n},_cacheSet:function(e,t,n){if(void 0===n&&(n=!0),this._isCacheStorageAvailable)try{n?localStorage.setItem(e,JSON.stringify(t)):sessionStorage.setItem(e,JSON.stringify(t))}catch(e){return this._cacheRemove("all",n),!1}else void 0===this.cache[e]&&(this.cache[e]={}),this.cache[e]=t},_cacheRemove:function(e,t){let n;if(void 0===t&&(t=!0),n=t?localStorage:sessionStorage,this._isCacheStorageAvailable)if("all"===e)for(var o=n.length;o--;){e=n.key(o);/wpcp.*-/.test(e)&&n.removeItem(e)}else n.removeItem(e);else"all"===e?delete this.cache:delete this.cache[e]},_helperDownloadUrlInline:function(e){var t="hiddenDownloader",n=document.getElementById(t);null===n&&(n=document.createElement("iframe"),n.id=t,n.style.display="none",document.body.appendChild(n)),n.src=e},_helperFormatBytes:function(e,t){if(0==e)return"—";var n=1e3,o=t+1||3,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,a)).toFixed(o))+" "+i[a]},_helperReturnBytes:function(e){if(""==e)return 0;var t=e.charAt(e.length-1);switch("B"!==t&&"b"!==t||!isNaN(e.charAt(e.length-2))||(t=e.charAt(e.length-2)),t){case"M":case"m":return 1048576*parseInt(e);case"k":case"k":return 1024*parseInt(e);case"G":case"g":return 1073741824*parseInt(e);default:return parseInt(e)}},_helperIframeFix:function(t){/iPhone|iPod|iPad/.test(navigator.userAgent)&&t.each(function(){0===e(this).closest("#safari_fix").length&&e(this).wrap(function(){return e('<div id="safari_fix"/>').css({width:"100%",height:"100%",overflow:"auto","z-index":"2","-webkit-overflow-scrolling":"touch"})})})},_helperReadArrCheckBoxes:function(t){var n=e(t+":checked").map(function(){return e(this).closest(".entry").attr("data-id")}).get();return n},_helperIsIE:function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}})}),jQuery(document).ready(function(e){e("div.OutoftheBox").OutoftheBox(OutoftheBox_vars)});var WPCP_OutoftheBox_mutationCallback=function(e,t){for(var n in e)if("childList"===n.type)for(var o in n.addedNodes)o instanceof HTMLElement&&o.matches('div[id*="OutoftheBox-"]')&&jQuery(o).OutoftheBox(OutoftheBox_vars)},WPCP_OutoftheBox_mutationObserver=new MutationObserver(WPCP_OutoftheBox_mutationCallback);WPCP_OutoftheBox_mutationObserver.observe(document.documentElement,{childList:!0,subtree:!0});