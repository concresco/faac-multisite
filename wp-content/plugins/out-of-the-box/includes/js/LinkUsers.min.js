(function(e){"use strict";function t(t){o=t,r=o.find("[data-user-id]").attr("data-user-id"),e("#wpcp-modal-selector").fadeIn()}function a(){e("#wpcp-modal-selector").fadeOut()}function n(t){if(t.origin!==window.parent.location.origin)return;if("object"!=typeof t.data||null===t.data||void 0===t.data.action)return;if("wpcp-select-entries"!==t.data.action)return;if("outofthebox"!==t.data.slug)return;const n=t.data.entries[0];e.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-linkusertofolder",account_id:n.account_id,id:n.entry_path,text:n.entry_path,userid:r,_ajax_nonce:OutoftheBox_vars.createlink_nonce},beforeSend:function(){o.find(".select_folder").addClass("!hidden"),a()},complete:function(){},success:function(e){void 0!==e.path?(o.parent().find(".column-personal_folder").html("<strong>"+e.path+"</strong>"),o.find(".deselect_folder").removeClass("!hidden")):location.reload()},dataType:"json"})}var o=null,r=null;e("#wpcp .select_folder").on("click",function(a){t(e(this).parent())}),window.addEventListener("message",n),e("#wpcp .deselect_folder").on("click",function(t){var a=e(this),n=e(this).parents("[data-user-id]").attr("data-user-id"),o=e(this).parents("[data-folder-key]").attr("data-folder-key");e.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-unlinkusertofolder",userid:n,personal_folder_key:o,_ajax_nonce:OutoftheBox_vars.createlink_nonce},beforeSend:function(){a.addClass("!hidden")},success:function(e){"1"===e?a.parents("[data-folder-key]").remove():location.reload()},complete:function(e){},dataType:"text"})})})(jQuery);