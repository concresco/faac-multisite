jQuery(document).ready(function(t){"use strict";function e(e){window.top.postMessage({slug:"outofthebox",action:"wpcp-shortcode",shortcode:e},window.location.origin);var o=t("#wpcp-form").data("callback");""!==o&&window.parent[o](e)}function o(o){var a=t(".OutoftheBox.files").attr("data-token"),i=t(".OutoftheBox[data-token='"+a+"']").attr("data-path"),r=n(".OutoftheBox[data-token='"+a+"'] input[name='selected-files[]']"),u=t(".OutoftheBox.files").attr("data-account-id");return 0===r.length&&e(""),t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-create-link",account_id:u,listtoken:a,lastpath:i,entries:r,_ajax_nonce:OutoftheBox_vars.createlink_nonce},beforeSend:function(){t(".OutoftheBox .loading").height(t(".OutoftheBox .ajax-filelist").height()),t(".OutoftheBox .loading").fadeTo(400,.8),t(".OutoftheBox .wpcp-dropdown-menu-button").attr("disabled","disabled")},complete:function(){t(".OutoftheBox .loading").fadeOut(400),t(".OutoftheBox .wpcp-dropdown-menu-button").removeAttr("disabled")},success:function(n){if(null!==n&&null!==n.links&&n.links.length>0){var a="";t.each(n.links,function(t,e){if(!1===e.link)a+='<a class="OutoftheBox-directlink" href="#">Plugin does not have permission to create shared link for: '+e.name+"</a><br/>";else{var n=e.link;"preview"===o&&(n=e.embeddedlink.replace("/raw/","/")),a+='<a class="OutoftheBox-directlink" href="'+n+'" target="_blank">'+e.name+"</a><br/>"}}),e(a)}},dataType:"json"}),!1}function n(e){var o=t(e+":checked").map(function(){return this.value}).get();return o}t(".wpcp-dropdown-menu-content a").on("click",function(e){e.stopPropagation(),o(t(this).data("type"))})});