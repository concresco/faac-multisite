(()=>{"use strict";var e,o={933:()=>{const e=window.wp.blocks,o=window.wp.components,c=window.ReactJSXRuntime,n=()=>(0,c.jsx)(o.Icon,{className:"wpcp-block-icon",icon:()=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 235.45 200",children:[(0,c.jsx)("defs",{}),(0,c.jsx)("path",{d:"M58.86 0L0 37.5 58.86 75l58.87-37.5L58.86 0z",fill:"#0061ff"}),(0,c.jsx)("path",{d:"M176.59 0l-58.86 37.5L176.59 75l58.86-37.5L176.59 0z",fill:"#0061ff"}),(0,c.jsx)("path",{d:"M0 112.5L58.86 150l58.87-37.5L58.86 75 0 112.5z",fill:"#0061ff"}),(0,c.jsx)("path",{d:"M176.59 75l-58.86 37.5 58.86 37.5 58.86-37.5L176.59 75z",fill:"#0061ff"}),(0,c.jsx)("path",{d:"M58.86 162.5l58.87 37.5 58.86-37.5-58.86-37.5-58.87 37.5z",fill:"#0061ff"})]})}),l=(window.React,window.wp.element),t=window.wp.blockEditor,i=e=>{const{icon:n,title:i,slug:s,description:r,attributes:{shortcode:a=""},setAttributes:d,clientId:p,global:u}=e,[h,w]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!0),[f,m]=(0,l.useState)(!1),j=(0,l.useRef)(null),v="wpcp-callback-"+p;let k;function g(e){d({shortcode:e}),b(!0)}function y(){w(!0)}function C(){w(!1)}function F(){b(!x)}function B(){const e=u.modules,o=[{label:u.i18n.createModule,value:"new"}];return Object.keys(e).forEach((c=>{o.push({label:e[c].title,value:e[c].id})})),o}function _(){const e=new RegExp(`\\[${s} module="(.+?)"\\]`,"g").exec(a);return e&&e[1]>0?e[1]:0}function M(e){const o=j.current,c=WPCP_shortcodeEncode(a);let n=u.ajaxUrl+"?shortcode="+c;o&&(e&&(n+="&cache="+(new Date).getTime()),clearTimeout(k),k=setTimeout((()=>{o.src=n+"&action="+s+"-module-preview&_ajax_nonce="+u.wpnonce}),e?0:1e3))}(0,l.useEffect)((()=>{const e=""!==a&&!a.includes('module="new"');if(m(e),!1===e&&b(!1),!x&&!f)return;if(!j.current)return;M();const o=j.current,c=()=>{const e=(o.contentDocument||o.contentWindow.document).querySelector("div.wpcp-browser-container");e&&(e.style.maxHeight="unset");const c=o.contentWindow.document.body.offsetHeight+20;o.style.height=c>20?`${c}px`:"50vh"};o.addEventListener("load",c);const n=setInterval(c,1e3);return()=>{o.removeEventListener("load",c),clearInterval(n)}}),[a,x,f]),window[v]=function(e){g(e),C(),M(!0),wp.data.dispatch("core/notices").createNotice("success",u.i18n.updatedModule,{type:"snackbar"})};let N=[(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.InspectorControls,{children:(0,c.jsx)(o.Panel,{children:(0,c.jsxs)(o.PanelBody,{title:u.i18n.module,initialOpen:!0,children:[(0,c.jsx)(o.PanelRow,{children:(0,c.jsx)(o.SelectControl,{value:_(),options:B(),onChange:e=>g(`[${s} module="${e}"]`),__nextHasNoMarginBottom:!0})}),(0,c.jsxs)(o.PanelRow,{children:[(0,c.jsx)(o.Button,{icon:"admin-generic",variant:"primary",size:"default",onClick:y,className:"wpcp-brand-color",children:u.i18n.openModuleBuilder}),f&&(0,c.jsx)(o.Button,{icon:"welcome-view-site",variant:"secondary",size:"default",onClick:F,disabled:_>0,children:x?u.i18n.hidePreview:u.i18n.showPreview})]}),(0,c.jsx)(o.PanelRow,{children:(0,c.jsx)(o.Notice,{status:"info",isDismissible:!1,children:u.i18n.moduleNotice})})]})})}),(0,c.jsx)(t.InspectorAdvancedControls,{children:(0,c.jsx)(o.TextareaControl,{label:"Custom Shortcode",value:a,rows:"10",className:"wpcp-block-textblock",onChange:g})}),(0,c.jsx)(t.BlockControls,{children:(0,c.jsxs)(o.ToolbarGroup,{children:[(0,c.jsx)(o.ToolbarButton,{icon:"admin-generic",label:u.i18n.openModuleBuilder,onClick:y,text:u.i18n.openModuleBuilder}),f&&(0,c.jsx)(o.ToolbarButton,{icon:"welcome-view-site",onClick:F,text:x?u.i18n.hidePreview:u.i18n.showPreview})]})})]})];return x&&N.push((0,c.jsxs)(o.Placeholder,{className:"wpcp-block-wrap wpcp-block-wrap-preview",isColumnLayout:!0,children:[(0,c.jsxs)(o.Flex,{direction:"row",gap:"1",justify:"center",children:[(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.Button,{icon:"admin-generic",variant:"secondary",size:"default",onClick:y,children:u.i18n.openModuleBuilder})}),(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.Button,{icon:"welcome-view-site",variant:"secondary",size:"default",onClick:F,children:u.i18n.hidePreview})})]}),f&&(0,c.jsx)("iframe",{ref:j,className:"wpcp-block-preview",width:"100%",style:{border:"none"}},"wpcp-block-preview")]},"wpcp-block-wrap")),x||N.push((0,c.jsxs)(o.Placeholder,{icon:n,className:"wpcp-block-wrap",isColumnLayout:!0,children:[(0,c.jsx)("div",{class:"wpcp-block-title",children:u.i18n.title}),(0,c.jsxs)(o.Flex,{direction:"row",gap:"1",justify:"center",children:[(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.SelectControl,{value:_(),options:B(),onChange:e=>g(`[${s} module="${e}"]`),__nextHasNoMarginBottom:!0})}),(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.Button,{icon:"admin-generic",variant:"primary",size:"default",onClick:y,className:"wpcp-brand-color",children:u.i18n.openModuleBuilder})})]}),""!==a&&!a.includes('module="new"')&&0===_()&&(0,c.jsx)(o.TextareaControl,{label:"Custom Shortcode",value:a,rows:"3",className:"wpcp-block-textblock",onChange:g})]},"wpcp-block-wrap")),h&&N.push((0,c.jsx)(o.Modal,{title:"",onRequestClose:C,shouldCloseOnClickOutside:!1,className:"wpcp-block-shortcode-builder-modal",children:(0,c.jsx)(o.FocusableIframe,{src:function(e){const o=WPCP_shortcodeEncode(e);return u.ajaxUrl+"?shortcode="+o+"&action="+s+"-getpopup&type=shortcodebuilder&callback="+v}(a)})})),(0,c.jsxs)("div",{className:"common-block",children:[n&&(0,c.jsx)("div",{className:"block-icon",children:n}),(0,c.jsx)("h2",{children:i}),(0,c.jsx)("p",{children:r}),N]})};wp.blocks.updateCategory("wpcp-blocks",{icon:()=>(0,c.jsx)(o.Icon,{className:"wpcp-block-icon",icon:()=>(0,c.jsxs)("svg",{width:"20",height:"20",role:"img",viewBox:"0 0 443.77 512",children:[(0,c.jsx)("path",{fill:"#512057",d:"M443.77,367.21l0-221.36c0-10.72-5.72-20.62-15-25.98L237.07,9.2c-9.28-5.36-20.72-5.36-30,0L15.37,119.88\r c-9.28,5.36-15,15.26-15,25.98l0,221.36c0,10.72,5.72,20.62,15,25.98l191.7,110.68c9.28,5.36,20.72,5.36,30,0l191.7-110.68\r C438.05,387.84,443.77,377.93,443.77,367.21z"}),(0,c.jsxs)("g",{id:"Symbol_1_",children:[(0,c.jsx)("path",{fill:"#FFFFFF",d:"M71.7,225.14c0,0,4.47-37.6,41.42-58.45c36.95-20.84,63-5.38,63-5.38s20.39-18.82,36.38-23.14\r c0,0,11.58-5.48,11.58,4.48v20.14c0,0,0.44,4.35-3.71,6.26c-4.15,1.91-20.43,8.67-32.13,27.75c0,0-3.65,4.99-8.69,1.85\r c0,0-33.84-26.54-65.67,7.8c0,0-12.44,11.66-11.06,33.19c0,0,1.94,9.95-5.2,10.58c-7.14,0.64-36.06,8.23-34.74,42.74\r c0,0,3.33,35.05,41.44,35.08l85.53,0.07v-45.52h-26.9c0,0-9.71,0.72-7.53-8.02c0,0,0.43-1.27,1.69-2.83l56.08-69.27\r c0,0,4.31-4.23,8.14-1.76c0,0,2.76,1.84,2.76,6.24v146.49c0,0,0.46,5.87-5.33,6.4H116.27c0,0-58.37,4.98-80.51-45.01\r C35.75,314.85,10.77,260.68,71.7,225.14z"}),(0,c.jsx)("path",{fill:"#FFFFFF",d:"M235.01,140.79c0,0-1.33-7.3,9.58-8.52c0,0,75.73-3.49,105.54,70.32c0,0,59.42,15.89,59.36,79.09\r c0,0,2.07,77.45-77.12,78.17h-87.95c0,0-9.51,2.09-9.45-7.98v-16.35c0,0-1-7.17,8.09-7.36h85.07c0,0,48.05,1.32,49.56-45.97\r c0,0,3.52-43.79-45.3-50.58c0,0-10.35,1.44-10.24-8.47c0.09-9.9-15.17-42.6-52.9-55.69v63.46h27.34c0,0,9.84-0.49,6.93,8.79\r l-56.69,70.21c0,0-9.98,9.39-11.9-3.24L235.01,140.79z"})]})]})})}),(0,e.registerBlockType)("wpcp/outofthebox-block",{title:wpcp_outofthebox_global.i18n.title,icon:n,description:wpcp_outofthebox_global.i18n.description,category:"wpcp-blocks",keywords:wpcp_outofthebox_global.i18n.keywords,attributes:{shortcode:{type:"string"}},edit:e=>(0,c.jsx)(i,{...e,slug:"outofthebox",icon:n,global:wpcp_outofthebox_global}),save:()=>null})}},c={};function n(e){var l=c[e];if(void 0!==l)return l.exports;var t=c[e]={exports:{}};return o[e](t,t.exports,n),t.exports}n.m=o,e=[],n.O=(o,c,l,t)=>{if(!c){var i=1/0;for(d=0;d<e.length;d++){c=e[d][0],l=e[d][1],t=e[d][2];for(var s=!0,r=0;r<c.length;r++)(!1&t||i>=t)&&Object.keys(n.O).every((e=>n.O[e](c[r])))?c.splice(r--,1):(s=!1,t<i&&(i=t));if(s){e.splice(d--,1);var a=l();void 0!==a&&(o=a)}}return o}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[c,l,t]},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={395:0,207:0};n.O.j=o=>0===e[o];var o=(o,c)=>{var l,t,i=c[0],s=c[1],r=c[2],a=0;if(i.some((o=>0!==e[o]))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(r)var d=r(n)}for(o&&o(c);a<i.length;a++)t=i[a],n.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return n.O(d)},c=self.webpackChunkwpcp_blocks=self.webpackChunkwpcp_blocks||[];c.forEach(o.bind(null,0)),c.push=o.bind(null,c.push.bind(c))})();var l=n.O(void 0,[207],(()=>n(933)));l=n.O(l)})();

/**
 * Shortcode Encoder/Decoder
 */
var WPCP_shortcodeEncode=function(){return function(e){if("string"!=typeof e)throw new Error("WPCP_shortcodeEncode: Input must be a string.");return btoa(new TextEncoder().encode(e).reduce((t,n)=>t+String.fromCharCode(n),""))}}();
var WPCP_shortcodeDecode=function(){return function(e){if("string"!=typeof e)throw new Error("WPCP_shortcodeDecode: Input must be a Base64-encoded string.");return new TextDecoder().decode(Uint8Array.from(atob(e),t=>t.charCodeAt(0)))}}();