(function(o){function e(a){a.origin===window.parent.location.origin&&"object"==typeof a.data&&null!==a.data&&void 0!==a.data.action&&void 0!==a.data.shortcode&&"wpcp-shortcode"===a.data.action&&"outofthebox"===a.data.slug&&(o(".wpcp-data-input").val(a.data.shortcode).trigger("change"),window.modal_action.close(),o("#wpcp-modal-action.OutoftheBox").remove(),window.removeEventListener("message",e))}function a(a){o("#wpcp-modal-action.OutoftheBox").length>0&&(void 0!==window.modal_action&&window.modal_action.close(),o("#wpcp-modal-action.OutoftheBox").remove());let t=o('<div class="wpcp-modal-header" tabindex="0">                          \n                    <a tabindex="0" class="close-button"  onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>'),d=o('<div class="wpcp-modal-body" tabindex="0" style="display:none"></div>'),n=o('<div class="wpcp-modal-footer" style="display:none"><div class="wpcp-modal-buttons"></div></div>'),i=o('<div id="wpcp-modal-action" class="OutoftheBox wpcp wpcp-modal wpcp-modal95 wpcp-modal-minimal light"><div class="modal-dialog"><div class="modal-content"><div class="loading"><div class="loader-beat"></div></div></div></div></div>');o("body").append(i);var l=a.val(),c=l.replace("</p>","").replace("<p>",""),s="shortcode="+WPCP_shortcodeEncode(c),p=o("<iframe src='"+OutoftheBox_vars.ajax_url+"?action=outofthebox-getpopup&type=modules&callback=uses_listener&"+s+"' width='100%' tabindex='-1' style='border:none' title=''></iframe>"),r=p.appendTo(d);o("#wpcp-modal-action.OutoftheBox .modal-content").append(t,d,n),r.on("load",function(){o(".wpcp-modal-body").fadeIn(),o(".wpcp-modal-footer").fadeIn(),o(".modal-content .loading:first").fadeOut()});let m=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0,afterClose(){o(".wpcp-data-input").removeClass("wpcp-data-input"),window.removeEventListener("message",e),o("#wpcp-modal-action.OutoftheBox").remove()}});document.addEventListener("keydown",function(o){m.keydown(o)},!1),m.open(),window.modal_action=m}o(".vc_edit_form_elements .edit_outofthebox_shortcode").click(function(t){t.preventDefault();let d=o(this).parents("form").find(".textarea");d.addClass("wpcp-data-input"),window.addEventListener("message",e),a(d)}),o(".vc_edit_form_elements .edit_outofthebox_shortcode").trigger("click")})(jQuery);