<div id="video_gallery" class="swiper">
    {% if sliderTitle %}
        <h4 class="slider-title">{{sliderTitle | default('References')}}</h4>
    {% endif %}
    <div class="swiper-wrapper">
        {% for slide in videoSlider %}
            <div class="swiper-slide">
                <div class="image ratio ratio-16x9">
                    <!-- Button trigger modal -->
                    {# <a href="#videoModal-{{ loop.index }}" class="btn play-video" 
                        data-toggle="modal" data-target="#videoModal-{{ loop.index }}"
                        data-theVideo="{{ slide.videoUrl}}"></a> #}
                    <button type="button" class="btn-play" data-bs-toggle="modal" 
                    data-bs-target="#videoModal-{{ loop.index }}">
                    </button>
                    <!-- Button trigger modal -->
                    
                    <img src="{{ slide.image }}" alt="{{ slide.description }}">   
                </div>
                <div class="content">
                    <p class="color-blue small">
                        {% if slide.title %}
                            <span>{{ slide.title }}</span>
                            {% if slide.title and slide.description %} / {% endif %}
                        {% endif %}
                        {% if slide.description %}
                            <span>{{ slide.description }}</span>
                        {% endif %}
                    </p>
                </div>
                <!-- Button trigger modal -->


                <!-- Modal -->
                {# <div class="modal fade" 
                id="videoModal-{{ loop.index }}" tabindex="-1" role="dialog" aria-labelledby="videoModal-{{ loop.index }}" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-body">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <div>
                                <iframe width="100%" height="350" 
                                src="{{ slide.videoUrl}}"
                                class="embed-responsive-item"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div> #}
        </div>
        {% endfor %}
    </div>
    <div class="navigation with-arrow">
        <div class="slider-prev blue"></div>
        <div class="slider-next blue"></div>
    </div>
</div>
<!-- Modal -->
{% for slide in videoSlider %}
{% block javascript %}
<script>
    $(document).ready(function () {
        //var url = $("#videoModal-{{ loop.index }}iframe").attr('src');
        var url{{ loop.index }} = '{{ slide.videoUrl}}';
        console.log(url{{ loop.index }});
        $("#videoModal-{{ loop.index }}").on('click', function () {
            console.log('click');
            $("#videoModal-{{ loop.index }}iframe").attr('src', '');
        });
        $("#videoModal-{{ loop.index }}").on('shown.bs.modal', function () {
            console.log('show');
            $("#videoModal-{{ loop.index }}iframe").attr('src', url{{ loop.index }});
        });
    });

</script>
{% endblock %}
<div class="modal fade video-modal" id="videoModal-{{ loop.index }}" tabindex="-1" aria-labelledby="videoModal-{{ loop.index }}Label" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-fullscreen-md-down modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="video-container">
                    {# <iframe id="videoModal-{{ loop.index }}iframe" width="100%" height="100%" 
                    src="{{ slide.videoUrl}}" class="embed-responsive-item"></iframe> #}
                    <iframe id="videoModal-{{ loop.index }}iframe" width="100%" height="100%" 
                    src="" class="embed-responsive-item"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}

